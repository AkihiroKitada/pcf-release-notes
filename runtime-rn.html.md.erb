---
title: Pivotal Application Service Release Notes
owner: Release Engineering
---

<% current_page.data.title = vars.app_runtime_full + " " + vars.v_major_version + " Release Notes" %>

Pivotal Platform is certified by the Cloud Foundry Foundation for <%= Date.today.year %>.

Read more about the [certified provider program](https://www.cloudfoundry.org/provider-faq/) and the [requirements of providers](https://www.cloudfoundry.org/provider-requirements/).

<hr>

## <a id='releases'></a> Releases
 
<%# DO NOT DELETE THIS LINE - robots use this to add new release notes %>

<p class="note warning"><strong>Warning:</strong> Before installing or upgrading to PAS v2.7, review the <a href="./breaking-changes.html#pas">PAS Breaking Changes v2.7</a>.</p>

### <a id='2.7.2'></a> 2.7.2

**Release Date:** 10/16/2019

* **[Security Fix]** Bump Go to address CVE-2019-16276
* **[Security Fix]** Add TLS to external policy server
* **[Security Fix]** Improve redaction of sensitive data in SMB driver bosh logs
* **[Bug Fix]** Fix defect disallowing "domain" option in SMB volume service
* **[Bug Fix]** Disallow injection into the query parameter
* **[Bug Fix]** Increase task result file size to ensure apps with very long start commands stage successfully
* **[Bug Fix]** Replace hard-coded MySQL Buffer Pool size with sane percentage value.
* **[Bug Fix]** Disable internal blobstore backups when using an external blobstore
* Bump ubuntu-xenial stemcell to version `456.30`
* Bump binary-offline-buildpack to version `1.0.35`
* Bump cf-networking to version `2.23.4`
* Bump cflinuxfs3 to version `0.135.0`
* Bump diego to version `2.36.5`
* Bump dotnet-core-offline-buildpack to version `2.3.1`
* Bump go-offline-buildpack to version `1.9.1`
* Bump java-offline-buildpack to version `4.23`
* Bump leadership-election to version `1.4.1`
* Bump log-cache to version `2.1.10`
* Bump loggregator-agent to version `3.21.3`
* Bump loggregator to version `105.6.1`
* Bump nginx-offline-buildpack to version `1.1.0`
* Bump nodejs-offline-buildpack to version `1.7.0`
* Bump php-offline-buildpack to version `4.4.0`
* Bump python-offline-buildpack to version `1.6.37`
* Bump r-offline-buildpack to version `1.0.13`
* Bump smb-volume to version `2.0.3`
* Bump staticfile-offline-buildpack to version `1.5.0`
* Bump statsd-injector to version `1.11.0`
* Bump uaa to version `73.4.10`

<table border="1" class="nice">
  <thead>
    <tr>
      <th>Component</th>
      <th>Version</th>
    </tr>
  </thead>
  <tbody>
    <tr><td>ubuntu-xenial stemcell</td><td>456.30</td></tr>
    <tr><td>backup-and-restore-sdk</td><td>1.16.0</td></tr>
    <tr><td>binary-offline-buildpack</td><td>1.0.35</td></tr>
    <tr><td>bosh-dns-aliases</td><td>0.0.3</td></tr>
    <tr><td>bosh-system-metrics-forwarder</td><td>0.0.18</td></tr>
    <tr><td>bpm</td><td>1.1.1</td></tr>
    <tr><td>capi</td><td>1.84.2</td></tr>
    <tr><td>cf-autoscaling</td><td>222</td></tr>
    <tr><td>cf-backup-and-restore</td><td>0.0.11</td></tr>
    <tr><td>cf-cli</td><td>1.19.0</td></tr>
    <tr><td>cf-networking</td><td>2.23.4</td></tr>
    <tr><td>cf-smoke-tests</td><td>40.0.119</td></tr>
    <tr><td>cflinuxfs3</td><td>0.135.0</td></tr>
    <tr><td>credhub</td><td>2.5.6</td></tr>
    <tr><td>diego</td><td>2.36.5</td></tr>
    <tr><td>dotnet-core-offline-buildpack</td><td>2.3.1</td></tr>
    <tr><td>garden-runc</td><td>1.19.7</td></tr>
    <tr><td>go-offline-buildpack</td><td>1.9.1</td></tr>
    <tr><td>haproxy</td><td>9.6.1</td></tr>
    <tr><td>istio</td><td>1.3.0</td></tr>
    <tr><td>java-offline-buildpack</td><td>4.23</td></tr>
    <tr><td>leadership-election</td><td>1.4.1</td></tr>
    <tr><td>log-cache</td><td>2.1.10</td></tr>
    <tr><td>loggregator-agent</td><td>3.21.3</td></tr>
    <tr><td>loggregator</td><td>105.6.1</td></tr>
    <tr><td>mapfs</td><td>1.2.0</td></tr>
    <tr><td>metric-registrar</td><td>1.1.1</td></tr>
    <tr><td>mysql-monitoring</td><td>9.4.0</td></tr>
    <tr><td>nats</td><td>27</td></tr>
    <tr><td>nfs-volume</td><td>2.3.0</td></tr>
    <tr><td>nginx-offline-buildpack</td><td>1.1.0</td></tr>
    <tr><td>nodejs-offline-buildpack</td><td>1.7.0</td></tr>
    <tr><td>notifications-ui</td><td>36</td></tr>
    <tr><td>notifications</td><td>61</td></tr>
    <tr><td>php-offline-buildpack</td><td>4.4.0</td></tr>
    <tr><td>push-apps-manager-release</td><td>670.0.10</td></tr>
    <tr><td>push-usage-service-release</td><td>670.0.10</td></tr>
    <tr><td>pxc</td><td>0.20.0</td></tr>
    <tr><td>python-offline-buildpack</td><td>1.6.37</td></tr>
    <tr><td>r-offline-buildpack</td><td>1.0.13</td></tr>
    <tr><td>routing</td><td>0.191.0</td></tr>
    <tr><td>ruby-offline-buildpack</td><td>1.7.42</td></tr>
    <tr><td>silk</td><td>2.22.2</td></tr>
    <tr><td>smb-volume</td><td>2.0.3</td></tr>
    <tr><td>staticfile-offline-buildpack</td><td>1.5.0</td></tr>
    <tr><td>statsd-injector</td><td>1.11.0</td></tr>
    <tr><td>syslog</td><td>11.4.0</td></tr>
    <tr><td>uaa</td><td>73.4.10</td></tr>
  </tbody>
</table>

### <a id='2.7.1'></a> 2.7.1

**Release Date:** 10/08/2019

* **[Security Fix]** Upgrade Diego Components to Use grpc v1.23.0 and Go 1.12.9 to Fix HTTP2 CVEs
* **[Security Fix]** UAA Patch release to address privilege escalation vulnerabilities
* **[Security Fix]** Bump garden-runc release to take Go HTTP/2 and containerd gRPC fixes
* **[Security Fix]** Upgrade gRPC-java to patch HTTP/2 vulnerability
* **[Feature Improvement]** Make TCP Router Request Timeout Configurable
* **[Feature Improvement]** Metric Registrar - Allow app developers to register custom routes for metrics endpoints
* **[Feature Improvement]** Docker image applications hosted in AWS ECR continue to run when restarted after the typical AWS ECR credential expiration period
* **[Feature Improvement]** Show revision number on processes in Apps Manager when revisions are enabled for an application
* **[Feature Improvement]** Show panels in Apps Manager for each web process during a rolling deployment
* **[Bug Fix]** Fixes a regression bug causing mounts for applications bound to smb volume services with an older version of the smbbroker to fail on restart or upgrade
* **[Bug Fix]** PXC Release: Stale pid files are cleaned up so that processes start reliably
* **[Bug Fix]** Fix Usage Service SQL errors when MySQL has ONLY_FULL_GROUP_BY enabled
* **[Bug Fix]** Show an app's buildpack information in Apps Manager based on the app's current droplet, to account for autodetected buildpacks
* **[Bug Fix]** Fix filter to remove Apps Manager requests from logs shown in Apps Manager when apps are deployed to a path
* **[Bug Fix]** Keep search results in Apps Manager from disappearing while they are being refreshed
* **[Bug Fix]** Fix Apps Manager search server crashes in cases where requests to Cloud Controller fail
* **[Bug Fix]** Fix links to documentation in Apps Manager to point to the correct PAS version
* **[Bug Fix]** Allow slashes to be typed in the Apps Manager search bar
* **[Bug Fix]** Fix bug where Spring Boot logo was shown instead of Steeltoe logo in the Apps Manager sidebar for Steeltoe apps
* **[Bug Fix]** Add plan column to the app services tab in Apps Manager so plan names do not get cut off
* **[Bug Fix]** Stretch background of flyout in Apps Manager to accommodate sidebar being closed
* **[Bug Fix]** Keep service icons from changing size in Apps Manager when an action is in progress
* **[Bug Fix]** Allow users to set custom memory and disk limits when running tasks against applications in Apps Manager
* **[Bug Fix]** Fix bug that prevented users from inviting others to organizations and spaces through Apps Manager that did not appear in the first page of results from Cloud Controller
* **[Bug Fix]** Improve performance of organization/space user role endpoint
* **[Bug Fix]** Improve scalability of container-to-container service discovery by increasing file descriptor limit on bosh-dns-adapter
* **[Bug Fix]** Tag system containers with `network.healthcheck` so that 3rd party networking plugins can ignore them.
* Bump ubuntu-xenial stemcell to version `456.27`
* Bump capi to version `1.84.2`
* Bump cf-networking to version `2.23.2`
* Bump cflinuxfs3 to version `0.130.0`
* Bump credhub to version `2.5.6`
* Bump diego to version `2.36.4`
* Bump garden-runc to version `1.19.7`
* Bump java-offline-buildpack to version `4.22`
* Bump metric-registrar to version `1.1.1`
* Bump push-apps-manager-release to version `670.0.10`
* Bump push-usage-service-release to version `670.0.10`
* Bump pxc to version `0.20.0`
* Bump smb-volume to version `2.0.1`
* Bump uaa to version `73.4.8`

<table border="1" class="nice">
  <thead>
    <tr>
      <th>Component</th>
      <th>Version</th>
    </tr>
  </thead>
  <tbody>
    <tr><td>ubuntu-xenial stemcell</td><td>456.27</td></tr>
    <tr><td>backup-and-restore-sdk</td><td>1.16.0</td></tr>
    <tr><td>binary-offline-buildpack</td><td>1.0.33</td></tr>
    <tr><td>bosh-dns-aliases</td><td>0.0.3</td></tr>
    <tr><td>bosh-system-metrics-forwarder</td><td>0.0.18</td></tr>
    <tr><td>bpm</td><td>1.1.1</td></tr>
    <tr><td>capi</td><td>1.84.2</td></tr>
    <tr><td>cf-autoscaling</td><td>222</td></tr>
    <tr><td>cf-backup-and-restore</td><td>0.0.11</td></tr>
    <tr><td>cf-cli</td><td>1.19.0</td></tr>
    <tr><td>cf-networking</td><td>2.23.2</td></tr>
    <tr><td>cf-smoke-tests</td><td>40.0.119</td></tr>
    <tr><td>cflinuxfs3</td><td>0.130.0</td></tr>
    <tr><td>credhub</td><td>2.5.6</td></tr>
    <tr><td>diego</td><td>2.36.4</td></tr>
    <tr><td>dotnet-core-offline-buildpack</td><td>2.2.12</td></tr>
    <tr><td>garden-runc</td><td>1.19.7</td></tr>
    <tr><td>go-offline-buildpack</td><td>1.8.42</td></tr>
    <tr><td>haproxy</td><td>9.6.1</td></tr>
    <tr><td>istio</td><td>1.3.0</td></tr>
    <tr><td>java-offline-buildpack</td><td>4.22</td></tr>
    <tr><td>leadership-election</td><td>1.4</td></tr>
    <tr><td>log-cache</td><td>2.1.6</td></tr>
    <tr><td>loggregator-agent</td><td>3.21</td></tr>
    <tr><td>loggregator</td><td>105.6</td></tr>
    <tr><td>mapfs</td><td>1.2.0</td></tr>
    <tr><td>metric-registrar</td><td>1.1.1</td></tr>
    <tr><td>mysql-monitoring</td><td>9.4.0</td></tr>
    <tr><td>nats</td><td>27</td></tr>
    <tr><td>nfs-volume</td><td>2.3.0</td></tr>
    <tr><td>nginx-offline-buildpack</td><td>1.0.15</td></tr>
    <tr><td>nodejs-offline-buildpack</td><td>1.6.52</td></tr>
    <tr><td>notifications-ui</td><td>36</td></tr>
    <tr><td>notifications</td><td>61</td></tr>
    <tr><td>php-offline-buildpack</td><td>4.3.78</td></tr>
    <tr><td>push-apps-manager-release</td><td>670.0.10</td></tr>
    <tr><td>push-usage-service-release</td><td>670.0.10</td></tr>
    <tr><td>pxc</td><td>0.20.0</td></tr>
    <tr><td>python-offline-buildpack</td><td>1.6.36</td></tr>
    <tr><td>r-offline-buildpack</td><td>1.0.11</td></tr>
    <tr><td>routing</td><td>0.191.0</td></tr>
    <tr><td>ruby-offline-buildpack</td><td>1.7.42</td></tr>
    <tr><td>silk</td><td>2.22.2</td></tr>
    <tr><td>smb-volume</td><td>2.0.1</td></tr>
    <tr><td>staticfile-offline-buildpack</td><td>1.4.43</td></tr>
    <tr><td>statsd-injector</td><td>1.10.0</td></tr>
    <tr><td>syslog</td><td>11.4.0</td></tr>
    <tr><td>uaa</td><td>73.4.8</td></tr>
  </tbody>
</table>

### <a id='2.7.0'></a> 2.7.0

* See [New Features in PAS v2.7](#new-features)
* See [Breaking Changes](./breaking-changes.html)

<table border="1" class="nice">
  <thead>
    <tr>
      <th>Component</th>
      <th>Version</th>
    </tr>
  </thead>
  <tbody>
    <tr><td>ubuntu-xenial stemcell</td><td>456.25</td></tr>
    <tr><td>backup-and-restore-sdk</td><td>1.16.0</td></tr>
    <tr><td>binary-offline-buildpack</td><td>1.0.33</td></tr>
    <tr><td>bosh-dns-aliases</td><td>0.0.3</td></tr>
    <tr><td>bosh-system-metrics-forwarder</td><td>0.0.18</td></tr>
    <tr><td>bpm</td><td>1.1.1</td></tr>
    <tr><td>capi</td><td>1.84.1</td></tr>
    <tr><td>cf-autoscaling</td><td>222</td></tr>
    <tr><td>cf-backup-and-restore</td><td>0.0.11</td></tr>
    <tr><td>cf-cli</td><td>1.19.0</td></tr>
    <tr><td>cf-networking</td><td>2.23.1</td></tr>
    <tr><td>cf-smoke-tests</td><td>40.0.119</td></tr>
    <tr><td>cflinuxfs3</td><td>0.128.0</td></tr>
    <tr><td>credhub</td><td>2.5.2</td></tr>
    <tr><td>diego</td><td>2.36.0</td></tr>
    <tr><td>dotnet-core-offline-buildpack</td><td>2.2.12</td></tr>
    <tr><td>garden-runc</td><td>1.19.5</td></tr>
    <tr><td>go-offline-buildpack</td><td>1.8.42</td></tr>
    <tr><td>haproxy</td><td>9.6.1</td></tr>
    <tr><td>istio</td><td>1.3.0</td></tr>
    <tr><td>java-offline-buildpack</td><td>4.21</td></tr>
    <tr><td>leadership-election</td><td>1.4</td></tr>
    <tr><td>log-cache</td><td>2.1.6</td></tr>
    <tr><td>loggregator-agent</td><td>3.21</td></tr>
    <tr><td>loggregator</td><td>105.6</td></tr>
    <tr><td>mapfs</td><td>1.2.0</td></tr>
    <tr><td>metric-registrar</td><td>1.0.4</td></tr>
    <tr><td>mysql-monitoring</td><td>9.4.0</td></tr>
    <tr><td>nats</td><td>27</td></tr>
    <tr><td>nfs-volume</td><td>2.3.0</td></tr>
    <tr><td>nginx-offline-buildpack</td><td>1.0.15</td></tr>
    <tr><td>nodejs-offline-buildpack</td><td>1.6.52</td></tr>
    <tr><td>notifications-ui</td><td>36</td></tr>
    <tr><td>notifications</td><td>61</td></tr>
    <tr><td>php-offline-buildpack</td><td>4.3.78</td></tr>
    <tr><td>push-apps-manager-release</td><td>670.0.8</td></tr>
    <tr><td>push-usage-service-release</td><td>670.0.8</td></tr>
    <tr><td>pxc</td><td>0.19.0</td></tr>
    <tr><td>python-offline-buildpack</td><td>1.6.36</td></tr>
    <tr><td>r-offline-buildpack</td><td>1.0.11</td></tr>
    <tr><td>routing</td><td>0.191.0</td></tr>
    <tr><td>ruby-offline-buildpack</td><td>1.7.42</td></tr>
    <tr><td>silk</td><td>2.22.2</td></tr>
    <tr><td>smb-volume</td><td>1.3.0</td></tr>
    <tr><td>staticfile-offline-buildpack</td><td>1.4.43</td></tr>
    <tr><td>statsd-injector</td><td>1.10.0</td></tr>
    <tr><td>syslog</td><td>11.4.0</td></tr>
    <tr><td>uaa</td><td>73.4.4</td></tr>
  </tbody>
</table>

## <a id='upgrade'></a> How to Upgrade

The procedure for upgrading to <%= vars.app_runtime_full %> v2.7 is documented in the [Upgrading <%= vars.product_name %>](http://docs.pivotal.io/platform/2-7/customizing/upgrading-pcf.html) topic.

When upgrading to PAS v2.7, be aware of the following upgrade considerations:

* If you previously used an earlier version of PAS, you must first upgrade to PAS v2.6 to successfully upgrade to PAS v2.7.

* Some partner service tiles may be incompatible with <%= vars.product_name %> v2.7. Pivotal is working with partners to ensure their tiles are updated to work with the latest versions of <%= vars.product_name %>.<br/><br/> For information about which partner service releases are currently compatible with <%= vars.product_name %> v2.7, review the appropriate partners services release documentation at [https://docs.pivotal.io](https://docs.pivotal.io), or contact the partner organization that produces the tile.


## <a id='new-features'></a> New Features in PAS v2.7

### <a id='sidecars'></a> Sidecars for Java Apps (Beta)

PAS v2.7 supports pushing Java apps with sidecars. Pushing apps with sidecars is a beta feature that released with PAS v2.6.0.

For more information about the PAS v2.6 feature, see [Pushing Apps with Sidecar Processes (Beta)](https://docs.pivotal.io/platform/2-6/pcf-release-notes/runtime-rn.html#sidecars). To understand how you can push Java apps with sidecars, see [Requirements for Java Apps](https://docs.pivotal.io/platform/2-7/devguide/sidecars.html#java) in _Pushing Apps with Sidecar Processes_.

### <a id='rotate-ccdb-key'></a> Rotate the Cloud Controller Database Encryption Key

PAS v2.7 supports rotating the Cloud Controller Database (CCDB) encryption key. This key is used to encrypt sensitive data at rest in the CCDB, such as app environment variables.

You can rotate the key using the new **Encryption key ledger** field and **Rotate CC Database Key** errand in the PAS tile. For more information, see [Rotating the Cloud Controller Database Encryption Key](https://docs.pivotal.io/platform/2-7/opsguide/rotate-ccdb-key.html).

### <a id='consul-server'></a> Consul Server Instance Removed from PAS

The Consul server instance is removed from PAS. This saves VM resources and reduces maintenance for managing a clustered component.

In PAS v2.4, the instance count for Consul server VMs was scaled down to zero. This allowed the Consul server to continue to provide the Consul link for tiles that consume it. In PAS v2.7, the Consul server instance is removed from PAS.

<p class="note warning"><b>Warning:</b> This feature causes breaking changes. For information about breaking changes caused by the removal of the Consul server instance, see <a href="./breaking-changes.html#consul-server">Consul Clients Not Supported in PAS</a>.</p>

### <a id='log-cache'></a> Maximum Envelopes Per Source Raised for Log Cache

By default, Log Cache keeps 100,000 envelopes per source. An envelope wraps an event and adds metadata. For sources that produce more than 100,000 envelopes, this default may not provide a long enough duration for you to specify a time period for a historical query. PAS v2.7 allows you to raise the maximum number of envelopes stored per source above the default 100,000 if needed.

For more information about configuring this limit, see the [Configure Advanced Features](https://docs.pivotal.io/platform/2-7/customizing/configure-pas.html#advanced) section of the _Configuring PAS_ topic. For more information about envelopes, see [Protocol Documentation](https://github.com/cloudfoundry/dropsonde-protocol/blob/master/events/README.md#envelope) in the dropsonde-protocol repository on GitHub.

### <a id='upgrade-service-instances'></a> Support for Upgrading Service Instances

PAS v2.7 includes CAPI v1.83.0, which supports upgrading service instances to the latest version of a service plan. This is an optional feature that service authors can implement.

App developers can check the `upgrade available` column in the output of the `cf services` command to see if a service broker supports upgrades. See [Upgrade a Service Instance](https://docs.pivotal.io/devguide/services/managing-services.html#upgrade) for more information.

If you are a service author and want to enable this feature, see [Updating a Service Instance](https://github.com/openservicebrokerapi/servicebroker/blob/master/spec.md#updating-a-service-instance) in the _Open Service Broker API Specification_.

### <a id='apps-manager-ui'></a> Updated Resource Navigation in Apps Manager UI

The Apps Manager UI has an updated look and feel as well as updated resource navigation.

You can navigate to resources, such as the app **Overview** and **Settings** panes, from a panel on the left side of the screen in Apps Manager. You can find resources that previously appeared in the panel, such as links to documentation and Support, in the Apps Manager footer.

For more information, see [Using Apps Manager](https://docs.pivotal.io/platform/2-7/console/index.html).

### <a id='apps-manager-revisions'></a> Manage App Re-Deployments and Revisions in Apps Manager

You can do the following in Apps Manager to manage app re-deployments and revisions:

- View revisions for an app.
- Deploy a revision of an app.
- View the deployment status of an app revision.
- View the environment variables associated with an app revision.

You can manage app re-deployments and revisions in the **Revisions** pane of the
Apps Manager UI.

For more information, see [Manage App Revisions](http://docs.pivotal.io/platform/2-7/console/manage-apps.html#revisions)
in _Managing Apps and Service Instances Using Apps Manager_.

For general information about app revisions in <%= vars.product_name %>, see [App Revisions](http://docs.pivotal.io/platform/2-7/devguide/revisions.html).

### <a id='uaadb'></a> UAA Property uaadb.tls Consolidates TLS Configuration Options

The UAA property `uaadb.tls` replaces `uaadb.tls_enabled` and `uaadb.skip_ssl_validation`. This simplifies and consolidates existing configuration options for TLS connections to an external database.

`uaadb.tls` enables TLS connections by default. The following are supported values for this property:

* `enabled`: Enables TLS connections to an external database.
* `enabled_skip_hostname_validation`: Enables TLS connections to an external database and ignores hostnames in database server certificates.
* `enabled_skip_all_validation`: Enables TLS connections to an external database and skips SSL validation in database server certificates.
* `disabled`: Disables TLS connections to the UAA database.

<p class='note warning'><strong>Warning:</strong> This is a breaking change. For more information, see <a href="https://docs.pivotal.io/platform/2-7/pcf-release-notes/breaking-changes.html#uaadb">UAA Properties uaadb.tls_enabled and uaadb.skip_ssl_validation Are Removed</a> in the <em><%= vars.product_name %> v2.7 Breaking Changes</em> topic.</p>

### <a id='credhub-kms'></a> CredHub Supports KMS

You can configure Key Management Service (KMS) encryption providers for CredHub. Configuring KMS encryption providers for CredHub allows you to more easily create and manage the encryption keys that you use in your environment.

For more information about how to configure KMS providers for CredHub in PAS, see the [Configure CredHub](https://docs.pivotal.io/platform/2-7/customizing/configure-pas.html#credhub) section of _Configuring PAS_.

### <a id='inactive-mysql'></a> Enable Inactive MySQL Port for Auditing and Reporting

PAS v2.7 introduces the option to enable MySQL proxies to listen on port 3336. If you enable this option, you can run auditing and reporting queries on a MySQL node that is not currently serving traffic. By running these queries on an inactive node, the active MySQL nodes continue to serve requests with no effect on performance.

To enable this option, select the **Enable inactive MySQL port** checkbox in the **Internal MySQL** pane of the PAS tile. For more information, see the [Configure Internal MySQL](http://docs.pivotal.io/platform/2-7/customizing/configure-pas.html#internal-mysql) section of the _Configuring PAS_ topic.

### <a id='ssh-windows-linux'></a> SSH Into Linux and Windows Apps on NSX-T

You can SSH into Linux and Windows apps on vSphere deployments with NSX-T enabled.

For more information, see [Accessing Apps with SSH](https://docs.pivotal.io/platform/2-7/devguide/deploy-apps/ssh-apps.html).

### <a id='agent-based-syslog-egress'></a> Agent-Based Syslog Egress Is Enabled by Default

PAS v2.7 contains Syslog Agents, which forward logs to configured syslog drains and Loggregator. Syslog Agents are enabled by default, and the option to enable or disable syslog egress is removed from the PAS UI.

Additionally, the instance groups `syslog_adapter` and `syslog_scheduler`, and the property `syslog_metrics_to_syslog_enabled` are removed, as agent-based syslog egress removes the need for VMs dedicated to syslog drains.

For more information about how Syslog Agents function within Loggregator, see [Loggregator Architecture](https://docs.pivotal.io/platform/2-7/loggregator/architecture.html) and the [loggregator-agent-release](https://github.com/cloudfoundry/loggregator-agent-release) repository on GitHub.

### <a id='diego-route-consistency'></a> Improved Route Consistency in Diego Route-Emitter

PAS v2.7 improves route consistency in the route-emitter component of Diego.

This Diego enhancement ensures better routing resiliency in the event of control plane downtime. For example, if NATS experiences downtime or the network becomes unstable, apps can remain routable since PAS no longer prunes routes on time-to-live (TTL).

This modification to the route-emitter removes the need for the **Prune routes on TTL expiry for TLS back ends** configuration option in PAS v2.7. For more information, see [Intermittent Misrouting of Apps in Large PCF Foundations](https://docs.pivotal.io/platform/2-6/pcf-release-notes/runtime-rn.html#stale-routes) in the PAS v2.6 release notes.

### <a id='mtls'></a> Mutual TLS Communication Between Routing API and Other Components

Communication between the PAS Routing API and other PAS routing components is authenticated with mutual TLS (mTLS).

In mTLS communication, both components verify each other's identity. This adds additional security for communication between the Routing API and other routing components.

### <a id='multiple-internal-domains'></a> Configure Multiple Internal Domains

You can configure multiple internal domains that apps use for internal DNS service discovery.

This allows you to create separate domains for different organizations in your foundation. For example, you can create a separate domain for apps on the development tier and apps on the production tier.

For more information about configuring internal domains for PAS, see [Configure App Developer Controls](https://docs.pivotal.io/platform/2-7/customizing/configure-pas.html#appdevctrl-config) in _Configuring PAS_.

### <a id='blobstore-backup'></a> Configure File Storage Backup Level

You can configure PAS v2.7 to exclude droplets or to exclude both droplets and packages from your blobstore backup. This feature reduces the size of your backup artifact and can enable you to take more frequent backups without using a large amount of storage space.

Excluding droplets or both droplets and packages from your blobstore backup can cause shorter periods of app downtime. However, you have to re-push or restage all apps, which results in a higher Recovery Time Objective (RTO).

For more information about the advantages and disadvantages of excluding droplets or excluding both droplets and packages, see [File Storage Backup Level](https://docs.pivotal.io/platform/2-7/customizing/backup-restore/file-storage-backup-level.html). To configure your blobstore backup level, see the [Configure File Storage](https://docs.pivotal.io/platform/2-7/customizing/configure-pas.html#file-storage) section of the _Configuring PAS_ topic.

### <a id='rolling-deployments'></a> Rolling App Deployments Is GA

The rolling app deployments feature is GA. It was released as a beta feature in PAS v2.4. This feature allows you to push updates to apps without incurring downtime.

This feature is enabled by default. You can optionally disable it in the **Advanced Features** pane.

For more information, see [Rolling App Deployments](https://docs.pivotal.io/platform/2-7/devguide/deploy-apps/rolling-deploy.html).

### <a id='nfsbroker'></a> nfsbroker Backing Store Is in CredHub

The `nfsbroker` backing store is migrated from your external PAS database to CredHub, provided that CredHub exists in the deployment. This allows you to specify LDAP credentials when you create an NFS Volume Service instance.

NFS Volume Service only uses CredHub as its backing store. If CredHub is not deployed, you cannot use NFS Volume Service.

For more information, see the [Configure LDAP Credentials with Service Instance Creation](https://docs.pivotal.io/platform/2-7/devguide/services/using-vol-services.html#ldap) section of the _Using an External File System (Volume Services)_ topic.

### <a id='v1-firehose'></a> Enable or Disable Firehose in Loggregator

The firehose is enabled by default and configurable. You can enable or disable the firehose by selecting or deselecting the **Enable V1 firehose** checkbox in the **System Logging** pane of PAS v2.7. Disabling the firehose disables the Traffic Controller job in Loggregator, which causes logs to be sent to the Traffic Controller VM through Log Cache instead.

To enable or disable the firehose, see the [Configure System Logging](https://docs.pivotal.io/platform/2-7/customizing/configure-pas.html#sys-logging) section of the _Configuring PAS_ topic. For more information about Traffic Controller and how it handles logs, see [Loggregator Architecture](https://docs.pivotal.io/platform/2-7/loggregator/architecture.html).

### <a id='annotations'></a> Annotation Keys and Key Prefixes Use Kubernetes Format

In PAS v2.7, annotation keys and key prefixes use the same metadata format as Kubernetes. This feature enables
creating services with a consistent metadata format across PAS and Kubernetes. For more information
about annotation keys and key prefixes, see [Using Metadata](https://docs.pivotal.io/platform/2-7/adminguide/metadata.html).

## <a id='known-issues'></a> Known Issues

### <a id='missing-env-variables'></a> Some Environment Variables Are Missing When Using cflinuxfs3

When using the `cflinuxfs3` stack in PAS v2.3 or later, if you provide environment variables containing periods or dashes, the environment variables do not appear in the process environment of the app.

To resolve this issue, ensure that all apps are using environment variables that do not contain periods or dashes.

For more information, see [Missing environment variables when using PAS 2.3+ and the cflinuxfs3 stack](https://community.pivotal.io/s/article/missing-environment-variables-when-using-pas-2-3-and-the-cflinuxfs3-stack) in the Pivotal Knowledge Base.


### <a id='duplicate-logs'></a> Duplicate or Missing Logs

When upgrading to PAS v2.7, you may see duplicate logs or no logs for a short time on syslog endpoints while BOSH enables the Syslog Agent component.

If BOSH removes Syslog Adapters before enabling Syslog Agents, there are no logs until BOSH enables the Syslog Agents. If BOSH enables Syslog Agents before removing Syslog Adapters, there are duplicate logs until BOSH removes Syslog Adapters.

For more information about Syslog Agents, see [Agent-Based Syslog Egress Is Enabled by Default](#agent-based-syslog-egress).

### <a id='last-syslog-drain'></a> Cannot Delete Last Remaining Syslog Drain

PAS v2.7 has a known issue in which you cannot delete the last remaining app Syslog drain in a foundation. This issue only applies if there is a single drain in the entire foundation, and you delete that drain.

When you delete the last remaining drain, logs continue to be sent to its Syslog endpoint. This happens even though the deletion appears to succeed. As a workaround, you can create another drain to cause the previously deleted drain to stop sending logs. You can use the following command: `cf drain APP-NAME invalid://invalid`. 

<p class='note'><strong>Note:</strong> To view the number of syslog drains in a foundation, ensure that the <a href="https://plugins.cloudfoundry.org/#log-cache">Log Cache CLI plugin</a> is installed, and run <code>cf tail syslog_agent -n 100 | grep 'GAUGE drains'</code>.</p>

### <a id='syslog-drain-type'></a> Cannot Choose Drain Type

Syslog drains provide the ability to send only logs or metrics to their Syslog endpoint, rather than a combination of both. However, PAS v2.7 has a known issue in which both logs and metrics are sent, regardless of the settings for any given drain. This corresponds to the `--type` option of `cf drain`.  


### <a id='multi-process-scaling'></a> Autoscaler Scales Only Web Processes Based on HTTP Metrics From All Processes

If a multi-process app is set to scale on HTTP Metrics, the metrics of non-web processes can cause Autoscaler to scale the web process incorrectly.

### <a id="apps-manager-invitations-failures"></a> Cannot Invite New Users or Add Space Roles in Apps Manager

The service that handles inviting new users to PAS fails to do the following in many cases:

* Add space roles for users
* Invite new users with space roles

As a workaround, you can use the CLI to manage user roles. See [User Admin](https://docs.cloudfoundry.org/cf-cli/cf-help.html#user-admin) in the cf CLI Reference Guide.

### <a id='scs-2x-not-supported'></a> Pivotal Spring Cloud Services v2.0.x Not Compatible with <%= vars.product_short %> v2.7

Pivotal Spring Cloud Services v2.0.x is not compatible with <%= vars.product_short %> v2.7 because Consul server is no longer available in <%= vars.product_short %> v2.7.
