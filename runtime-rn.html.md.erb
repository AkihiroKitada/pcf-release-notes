---
title: Pivotal Application Service v2.2 Release Notes
owner: Release Engineering
---

Pivotal Cloud Foundry is certified by the Cloud Foundry Foundation for <%= Date.today.year %>.

Read more about the [certified provider
program](https://www.cloudfoundry.org/provider-faq/) and the [requirements of
providers](https://www.cloudfoundry.org/provider-requirements/).

<hr>

## <a id='releases'></a> Releases

### <a id='2.2.0-beta.2'></a> 2.2.0-beta.2

* **[New Feature]** New log-cache release exposes low latency APIs for logs and metrics
  * App developers can interact with it using the [log-cache CF CLI plugin](https://github.com/cloudfoundry/log-cache-cli)
  * Other tiles and services will use log cache to enable new features

* **[Removed Feature]** MySQL backup jobs and corresponding configuration have been removed
  * This feature was deprecated in a previous release
* **[Removed Feature]** Pivotal Account app is no longer deployed as a post deploy errand
  * `login.SYSTEMDOMAIN` now routes to the UAA app directly
  * NOTE: if Pivotal Account was previously deployed, it will not currently be removed automatically

  Add log-cache version `1.1.1`

  Rollback credhub version to `1.8.3`

  Bump cf-smoke-tests version to `40.0.4`
  Bump push-apps-manager-release version to `665.0.7`
  Bump routing version to `0.178.0`

  <table border="1" class="nice">
  <thead> <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>Stemcell</td><td>3586.7</td>
  </tr><tr>
    <td>backup-and-restore-sdk</td><td>1.6.0</td>
  </tr><tr>
    <td>binary-offline-buildpack</td><td>1.0.18</td>
  </tr><tr>
    <td>bosh-dns-aliases</td><td>0.0.2</td>
  </tr><tr>
    <td>bosh-system-metrics-forwarder</td><td>0.0.11</td>
  </tr><tr>
    <td>capi</td><td>1.57.0</td>
  </tr><tr>
    <td>cf-autoscaling</td><td>118.2</td>
  </tr><tr>
    <td>cf-backup-and-restore</td><td>0.0.11</td>
  </tr><tr>
    <td>cf-mysql</td><td>36.14.0</td>
  </tr><tr>
    <td>cf-networking</td><td>2.1.0</td>
  </tr><tr>
    <td>cf-smoke-tests</td><td>40.0.4</td>
  </tr><tr>
    <td>cf-syslog-drain</td><td>6.5</td>
  </tr><tr>
    <td>cflinuxfs2</td><td>1.208.0</td>
  </tr><tr>
    <td>consul</td><td>192</td>
  </tr><tr>
    <td>credhub</td><td>1.8.3</td>
  </tr><tr>
    <td>diego</td><td>2.6.0</td>
  </tr><tr>
    <td>dotnet-core-offline-buildpack</td><td>2.0.6</td>
  </tr><tr>
    <td>garden-runc</td><td>1.13.2</td>
  </tr><tr>
    <td>go-offline-buildpack</td><td>1.8.21</td>
  </tr><tr>
    <td>haproxy</td><td>8.7.0</td>
  </tr><tr>
    <td>java-offline-buildpack</td><td>4.12</td>
  </tr><tr>
    <td>log-cache</td><td>1.1.1</td>
  </tr><tr>
    <td>loggregator</td><td>102.1</td>
  </tr><tr>
    <td>mysql-monitoring</td><td>8.18.0</td>
  </tr><tr>
    <td>nats</td><td>24</td>
  </tr><tr>
    <td>nfs-volume</td><td>1.3.0</td>
  </tr><tr>
    <td>nodejs-offline-buildpack</td><td>1.6.23</td>
  </tr><tr>
    <td>notifications</td><td>46</td>
  </tr><tr>
    <td>notifications-ui</td><td>32</td>
  </tr><tr>
    <td>php-offline-buildpack</td><td>4.3.54</td>
  </tr><tr>
    <td>pivotal-account</td><td>2.0.0</td>
  </tr><tr>
    <td>push-apps-manager-release</td><td>665.0.7</td>
  </tr><tr>
    <td>push-usage-service-release</td><td>666.0.2</td>
  </tr><tr>
    <td>python-offline-buildpack</td><td>1.6.15</td>
  </tr><tr>
    <td>pxc</td><td>0.6.0</td>
  </tr><tr>
    <td>routing</td><td>0.178.0</td>
  </tr><tr>
    <td>ruby-offline-buildpack</td><td>1.7.18</td>
  </tr><tr>
    <td>staticfile-offline-buildpack</td><td>1.4.27</td>
  </tr><tr>
    <td>statsd-injector</td><td>1.3.0</td>
  </tr><tr>
    <td>silk</td><td>2.1.0</td>
  </tr><tr>
    <td>syslog</td><td>11.3.2</td>
  </tr><tr>
    <td>uaa</td><td>58.1</td>
  </tr>
  </tbody>
  <tfoot>
  <tr>
    <td colspan="2"><em>\* Components marked with an asterisk have been patched to resolve security vulnerabilities or fix component behavior.</em></td>
  </tr>
  </tfoot>
  </table>

### <a id='2.2.0-beta.1'></a> 2.2.0-beta.1

* **[New Feature]** Add support for IAM Instance Profile authentication to AWS blobstores
  * NOTE: there is currently a known issue using this feature in combination with BBR
* **[New Feature]** Add support to BBR for backing up S3 compatible blobstores that are not configured with versioning enabled
* **[New Feature]** UAA now supports creating identity zones that can use multi-factor authentication
  * NOTE: this feature is only available to other tiles and users of UAA; it is not available in PAS
* **[New Feature]** New "PXC" MySQL release with improved security
  * Within the cluster, peers communicate with each other over TLS
  * NOTE: this is on by default for new deployments, but off by default when upgrading
  * Turning it on for an existing deployment will result in some downtime while data is migrated from the existng cf-mysql database to the new database

* **[Feature Improvement]** Add option to enable verbose event logging in Autoscaler
* **[Feature Improvement]** Add option to enable human-readable timestamps in logs for Diego components
  * NOTE: this is on by default for new deployments, but off by default when upgrading

* **[Removed Feature]** MySQL backup jobs and corresponding configuration have been removed
  * This feature was deprecated in a previous release
* **[Removed Feature]** Pivotal Account app is no longer deployed as a post deploy errand
  * `login.SYSTEMDOMAIN` now routes to the UAA app directly
  * NOTE: if Pivotal Account was previously deployed, it will not currently be removed automatically

* Add pxc version `0.6.0`
* Add silk version `2.1.0`
* Add syslog version `11.3.2`

* Remove syslog-migration

* Bump stemcell to version `3586.7`
* Bump capi to version `1.57.0`
* Bump cf-app-sd to version `0.6.0`
* Bump cf-mysql to version `36.14.0`
* Bump cf-networking to version `2.1.0`
* Bump cf-smoke-tests to version `40.0.3`
* Bump cf-syslog-drain to version `6.5`
* Bump cflinuxfs2 to version `1.208.0`
* Bump credhub to version `1.9.1`
* Bump diego to version `2.6.0`
* Bump dotnet-core-offline-buildpack to version `2.0.6`
* Bump garden-runc to version `1.13.2`
* Bump java-offline-buildpack to version `4.12`
* Bump mysql-monitoring to version `8.18.0`
* Bump nats to version `24`
* Bump nfs-volume to version `1.3.0`
* Bump nodejs-offline-buildpack to version `1.6.23`
* Bump php-offline-buildpack to version `4.3.54`
* Bump pivotal-account to version `2.0.0`
* Bump push-apps-manager-release to version `665.0.6`
* Bump push-usage-service-release to version `666.0.2`
* Bump python-offline-buildpack to version `1.6.15`
* Bump routing to version `0.177.0`
* Bump ruby-offline-buildpack to version `1.7.18`
* Bump staticfile-offline-buildpack to version `1.4.27`
* Bump uaa to version `58.1`

  <table border="1" class="nice">
  <thead> <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>Stemcell</td><td>3586.7</td>
  </tr><tr>
    <td>backup-and-restore-sdk</td><td>1.6.0</td>
  </tr><tr>
    <td>binary-offline-buildpack</td><td>1.0.18</td>
  </tr><tr>
    <td>bosh-dns-aliases</td><td>0.0.2</td>
  </tr><tr>
    <td>bosh-system-metrics-forwarder</td><td>0.0.11</td>
  </tr><tr>
    <td>capi</td><td>1.57.0</td>
  </tr><tr>
    <td>cf-autoscaling</td><td>118.2</td>
  </tr><tr>
    <td>cf-backup-and-restore</td><td>0.0.11</td>
  </tr><tr>
    <td>cf-mysql</td><td>36.14.0</td>
  </tr><tr>
    <td>cf-networking</td><td>2.1.0</td>
  </tr><tr>
    <td>cf-smoke-tests</td><td>40.0.3</td>
  </tr><tr>
    <td>cf-syslog-drain</td><td>6.5</td>
  </tr><tr>
    <td>cflinuxfs2</td><td>1.208.0</td>
  </tr><tr>
    <td>consul</td><td>192</td>
  </tr><tr>
    <td>credhub</td><td>1.9.1</td>
  </tr><tr>
    <td>diego</td><td>2.6.0</td>
  </tr><tr>
    <td>dotnet-core-offline-buildpack</td><td>2.0.6</td>
  </tr><tr>
    <td>garden-runc</td><td>1.13.2</td>
  </tr><tr>
    <td>go-offline-buildpack</td><td>1.8.21</td>
  </tr><tr>
    <td>haproxy</td><td>8.7.0</td>
  </tr><tr>
    <td>java-offline-buildpack</td><td>4.12</td>
  </tr><tr>
    <td>loggregator</td><td>102.1</td>
  </tr><tr>
    <td>mysql-backup</td><td>2.1.0</td>
  </tr><tr>
    <td>mysql-monitoring</td><td>8.18.0</td>
  </tr><tr>
    <td>nats</td><td>24</td>
  </tr><tr>
    <td>nfs-volume</td><td>1.3.0</td>
  </tr><tr>
    <td>nodejs-offline-buildpack</td><td>1.6.23</td>
  </tr><tr>
    <td>notifications</td><td>46</td>
  </tr><tr>
    <td>notifications-ui</td><td>32</td>
  </tr><tr>
    <td>php-offline-buildpack</td><td>4.3.54</td>
  </tr><tr>
    <td>pivotal-account</td><td>2.0.0</td>
  </tr><tr>
    <td>push-apps-manager-release</td><td>665.0.6</td>
  </tr><tr>
    <td>push-usage-service-release</td><td>666.0.2</td>
  </tr><tr>
    <td>python-offline-buildpack</td><td>1.6.15</td>
  </tr><tr>
    <td>pxc</td><td>0.6.0</td>
  </tr><tr>
    <td>routing</td><td>0.177.0</td>
  </tr><tr>
    <td>ruby-offline-buildpack</td><td>1.7.18</td>
  </tr><tr>
    <td>staticfile-offline-buildpack</td><td>1.4.27</td>
  </tr><tr>
    <td>statsd-injector</td><td>1.3.0</td>
  </tr><tr>
    <td>silk</td><td>2.1.0</td>
  </tr><tr>
    <td>syslog</td><td>11.3.2</td>
  </tr><tr>
    <td>uaa</td><td>58.1</td>
  </tr>
  </tbody>
  <tfoot>
  <tr>
    <td colspan="2"><em>\* Components marked with an asterisk have been patched to resolve security vulnerabilities or fix component behavior.</em></td>
  </tr>
  </tfoot>
  </table>

### <a id='2.2.0-alpha.2'></a> 2.2.0-alpha.2

* Bump stemcell to version `3451.12`
* Bump backup-and-restore-sdk to version `1.6.0`
* Bump binary-offline-buildpack to version `1.0.18`
* Bump bosh-dns-aliases to version `0.0.2`
* Bump capi to version `1.54.0`
* Bump cf-app-sd to version `0.6.0`
* Bump cf-autoscaling to version `118.2`
* Bump cf-backup-and-restore to version `0.0.11`
* Bump cf-mysql to version `36.12.0`
* Bump cf-networking to version `1.13.0`
* Bump cf-smoke-tests to version `40.0.2`
* Bump cf-syslog-drain to version `6.4`
* Bump cflinuxfs2 to version `1.203.0`
* Bump consul to version `192`
* Bump credhub to version `1.8.3`
* Bump diego to version `2.4.0`
* Bump dotnet-core-offline-buildpack to version `2.0.5`
* Bump garden-runc to version `1.12.1`
* Bump go-offline-buildpack to version `1.8.21`
* Bump haproxy to version `8.7.0`
* Bump java-offline-buildpack to version `4.10`
* Bump loggregator to version `102.1`
* Bump mysql-backup to version `2.1.0`
* Bump mysql-monitoring to version `8.17.0`
* Bump nats to version `23`
* Bump nodejs-offline-buildpack to version `1.6.22`
* Bump notifications to version `46`
* Bump notifications-ui to version `32`
* Bump php-offline-buildpack to version `4.3.51`
* Bump push-apps-manager-release to version `665.0.3`
* Bump push-usage-service-release to version `666.0.2`
* Bump python-offline-buildpack to version `1.6.12`
* Bump routing to version `0.175.0`
* Bump ruby-offline-buildpack to version `1.7.16`
* Bump staticfile-offline-buildpack to version `1.4.26`
* Bump statsd-injector to version `1.3.0`
* Bump syslog-migration to version `11.1.1`
* Bump uaa to version `57.1`

  <table border="1" class="nice">
  <thead> <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>Stemcell</td><td>3541.12</td>
  </tr><tr>
    <td>backup-and-restore-sdk</td><td>1.6.0</td>
  </tr><tr>
    <td>binary-offline-buildpack</td><td>1.0.18</td>
  </tr><tr>
    <td>bosh-dns-aliases</td><td>0.0.2</td>
  </tr><tr>
    <td>bosh-system-metrics-forwarder</td><td>0.0.11</td>
  </tr><tr>
    <td>capi</td><td>1.54.0</td>
  </tr><tr>
    <td>cf-autoscaling</td><td>118.2</td>
  </tr><tr>
    <td>cf-backup-and-restore</td><td>0.0.11</td>
  </tr><tr>
    <td>cf-mysql</td><td>36.12.0</td>
  </tr><tr>
    <td>cf-networking</td><td>1.13.0</td>
  </tr><tr>
    <td>cf-smoke-tests</td><td>40.0.2</td>
  </tr><tr>
    <td>cf-syslog-drain</td><td>6.4</td>
  </tr><tr>
    <td>cflinuxfs2</td><td>1.203.0</td>
  </tr><tr>
    <td>consul</td><td>192</td>
  </tr><tr>
    <td>credhub</td><td>1.8.3</td>
  </tr><tr>
    <td>diego</td><td>2.4.0</td>
  </tr><tr>
    <td>dotnet-core-offline-buildpack</td><td>2.0.5</td>
  </tr><tr>
    <td>garden-runc</td><td>1.12.1</td>
  </tr><tr>
    <td>go-offline-buildpack</td><td>1.8.21</td>
  </tr><tr>
    <td>haproxy</td><td>8.7.0</td>
  </tr><tr>
    <td>java-offline-buildpack</td><td>4.10</td>
  </tr><tr>
    <td>loggregator</td><td>102.1</td>
  </tr><tr>
    <td>mysql-backup</td><td>2.1.0</td>
  </tr><tr>
    <td>mysql-monitoring</td><td>8.17.0</td>
  </tr><tr>
    <td>nats</td><td>23</td>
  </tr><tr>
    <td>nfs-volume</td><td>1.2.0</td>
  </tr><tr>
    <td>nodejs-offline-buildpack</td><td>1.6.22</td>
  </tr><tr>
    <td>notifications</td><td>46</td>
  </tr><tr>
    <td>notifications-ui</td><td>32</td>
  </tr><tr>
    <td>php-offline-buildpack</td><td>4.3.51</td>
  </tr><tr>
    <td>pivotal-account</td><td>1.8.3</td>
  </tr><tr>
    <td>push-apps-manager-release</td><td>665.0.3</td>
  </tr><tr>
    <td>push-usage-service-release</td><td>666.0.2</td>
  </tr><tr>
    <td>python-offline-buildpack</td><td>1.6.12</td>
  </tr><tr>
    <td>routing</td><td>0.175.0</td>
  </tr><tr>
    <td>ruby-offline-buildpack</td><td>1.7.16</td>
  </tr><tr>
    <td>staticfile-offline-buildpack</td><td>1.4.26</td>
  </tr><tr>
    <td>statsd-injector</td><td>1.3.0</td>
  </tr><tr>
    <td>syslog-migration</td><td>11.1.1</td>
  </tr><tr>
    <td>uaa</td><td>57.1</td>
  </tr>
  </tbody>
  <tfoot>
  <tr>
    <td colspan="2"><em>\* Components marked with an asterisk have been patched to resolve security vulnerabilities or fix component behavior.</em></td>
  </tr>
  </tfoot>
  </table>

### <a id='2.2.0-alpha.1'></a> 2.2.0-alpha.1

  <table border="1" class="nice">
  <thead> <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>Stemcell</td><td>3541.8</td>
  </tr><tr>
    <td>backup-and-restore-sdk</td><td>1.4.2</td>
  </tr><tr>
    <td>binary-offline-buildpack</td><td>1.0.15</td>
  </tr><tr>
    <td>bosh-dns-aliases</td><td>0.0.1</td>
  </tr><tr>
    <td>bosh-system-metrics-forwarder</td><td>0.0.11</td>
  </tr><tr>
    <td>capi</td><td>1.49.0\*</td>
  </tr><tr>
    <td>cf-autoscaling</td><td>118</td>
  </tr><tr>
    <td>cf-backup-and-restore</td><td>0.0.10</td>
  </tr><tr>
    <td>cf-mysql</td><td>36.10.0</td>
  </tr><tr>
    <td>cf-networking</td><td>1.10.0</td>
  </tr><tr>
    <td>cf-smoke-tests</td><td>39</td>
  </tr><tr>
    <td>cf-syslog-drain</td><td>5.1</td>
  </tr><tr>
    <td>cflinuxfs2</td><td>1.188.0</td>
  </tr><tr>
    <td>consul</td><td>191</td>
  </tr><tr>
    <td>credhub</td><td>1.7.1</td>
  </tr><tr>
    <td>diego</td><td>1.35.0</td>
  </tr><tr>
    <td>dotnet-core-offline-buildpack</td><td>2.0.1</td>
  </tr><tr>
    <td>garden-runc</td><td>1.11.1</td>
  </tr><tr>
    <td>go-offline-buildpack</td><td>1.8.16</td>
  </tr><tr>
    <td>haproxy</td><td>8.6.0</td>
  </tr><tr>
    <td>java-offline-buildpack</td><td>4.8</td>
  </tr><tr>
    <td>loggregator</td><td>101.5\*</td>
  </tr><tr>
    <td>mysql-backup</td><td>1.38.0</td>
  </tr><tr>
    <td>mysql-monitoring</td><td>8.15.0</td>
  </tr><tr>
    <td>nats</td><td>22</td>
  </tr><tr>
    <td>nfs-volume</td><td>1.2.0</td>
  </tr><tr>
    <td>nodejs-offline-buildpack</td><td>1.6.15</td>
  </tr><tr>
    <td>notifications</td><td>44</td>
  </tr><tr>
    <td>notifications-ui</td><td>31</td>
  </tr><tr>
    <td>php-offline-buildpack</td><td>4.3.48</td>
  </tr><tr>
    <td>pivotal-account</td><td>1.8.3</td>
  </tr><tr>
    <td>push-apps-manager-release</td><td>664.0.0</td>
  </tr><tr>
    <td>push-usage-service-release</td><td>666.0.1</td>
  </tr><tr>
    <td>python-offline-buildpack</td><td>1.6.7</td>
  </tr><tr>
    <td>routing</td><td>0.172.0</td>
  </tr><tr>
    <td>ruby-offline-buildpack</td><td>1.7.11</td>
  </tr><tr>
    <td>staticfile-offline-buildpack</td><td>1.4.21</td>
  </tr><tr>
    <td>statsd-injector</td><td>1.1.0</td>
  </tr><tr>
    <td>syslog-migration</td><td>11.1.0</td>
  </tr><tr>
    <td>uaa</td><td>55</td>
  </tr>
  </tbody>
  <tfoot>
  <tr>
    <td colspan="2"><em>\* Components marked with an asterisk have been patched to resolve security vulnerabilities or fix component behavior.</em></td>
  </tr>
  </tfoot>
  </table>

## <a id='upgrade'></a> How to Upgrade

The procedure for upgrading to Pivotal Application Service (PAS) v2.2 is documented in the [Upgrading Pivotal Cloud
Foundry](http://docs.pivotal.io/pivotalcf/2-2/customizing/upgrading-pcf.html) topic.

When upgrading to v2.2, be aware of the following upgrade considerations:

* If you previously used an earlier version of PAS, you must first upgrade to PAS v2.1 to successfully upgrade to PAS v2.2.

* Some partner service tiles may be incompatible with PCF v2.2. Pivotal is
  working with partners to ensure their tiles are updated to work with the
  latest versions of PCF.<br/><br/> For information about which partner service
  releases are currently compatible with PCF v2.2, review the appropriate
  partners services release documentation at
  [https://docs.pivotal.io](https://docs.pivotal.io), or contact the partner
  organization that produces the tile.

## <a id='new-features'></a> New Features in PAS v2.2

### <a id="cipher-suites"></a> More Secure Cipher Suites for SSH Proxy

The SSH proxy accepts a narrower range of ciphers, MACs, and key exchanges. This change enables greater security and reduces vulnerabilities.

These SSH-proxy settings are not configurable in the PAS tile.

<p class="note"><strong>Note:</strong> This feature may have complications if you use a SSH client other than <code>cf ssh</code> to connect. See <a href="https://docs.pivotal.io/pivotalcf/devguide/deploy-apps/ssh-apps.html#other-ssh-access">Application SSH Access without cf CLI</a> for more information.</p>

### <a id="timestamp"></a> New Format for Diego Timestamps

You can now use RFC 3339 format for Diego timestamps in logs.

For new PAS v2.2 installations, RFC 3339 format is enabled by default.
The Unix epoch format is set by default for upgrades to PAS v2.2.

You can enable the new timestamp format for Diego logs in the PAS tile.

<p class="note breaking"><strong>Breaking Change:</strong> Before enabling RFC 3339 format for Diego logs, ensure that your log aggregation system
anticipates the timestamp format change. If you experience issues, you can disable RFC 3339 format in the PAS tile.</p>

### <a id="task-placement-resilience"></a> Task Placement More Resilient to Resource Unavailability

When memory or disk resources are temporarily unavailable, PAS no longer fails application and staging tasks immediately. Instead, it attempts several times to place the task on a Diego cell with sufficient capacity.

This temporary unavailability may occur when many application instances or tasks are being created or destroyed simultaneously or when the Diego Bulletin Board System (BBS) or auctioneer fails to communicate to one or more Diego cells.

For more information about Diego task allocation, see [How Diego Balances App Processes](https://docs.pivotal.io/pivotalcf/concepts/diego/diego-auction.html).

### <a id="log-cache"></a> Loggregator Introduces Log Cache

Loggregator adds an in-memory caching layer for logs and metrics and provides a RESTful interface for retrieving them.
Log Cache speeds up the retrieval of data from the Loggregator system, especially for deployments with a large number of Dopplers.
Users may notice faster results when retrieving recent logs for their apps from Log Cache instead of executing the `cf logs APP-NAME --recent` command.

For more information about the new component, see the [Log Cache](https://github.com/cloudfoundry/log-cache) and [Log Cache CLI Plugin](https://github.com/cloudfoundry/log-cache-cli) GitHub repositories.

### <a id="syslog-drains"></a> Syslog Draining for Service Instances (Beta)

The `cf-drain-cli` plugin now enables app developers to bind user-provided syslog drains to service instances.
For more information, see the [CF Drain CLI Plugin](https://github.com/cloudfoundry/cf-drain-cli) GitHub repository.
If a service tile supports syslog drains, app developers can use this plugin to forward logs and metrics from their service instance to an external endpoint.

### <a id='logout'></a> Improved Session Management Behavior in Apps Manager

Users are now logged out of Apps Manager when they log out of UAA or their UAA session expires.
You can configure the **Global Login Session Max Timeout** and **Global Login Session Idle Timeout** values in the **UAA** pane of the PAS tile.
