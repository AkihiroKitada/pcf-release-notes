---
title: Pivotal Elastic Runtime v1.8 Release Notes
owner: Release Engineering
---

## <a id='update'></a>About Updating to Elastic Runtime v1.8.10 or Later

If you are currently on Elastic Runtime v1.8.7 or earlier, you should update your Elastic Runtime.
Later versions include a major stemcell upgrade to 3263.x. This stemcell uses the Linux kernel v4.4 instead of the v3.19.
Ubuntu no longer provides CVE patches for Linux kernel v3.19.

Before updating Elastic Runtime, ensure that you have updated to Ops Manager v1.8.2 or later, and see the section below to avoid an issue with Diego BBS when updating.

After updating Elastic Runtime, update your PCF Service tiles to the latest point versions.

## <a id="upgrade-issue"></a> Resolve Diego BBS Issue when Upgrading from 1.7 to 1.8

#### The Problem

<p class="note"><strong>Note</strong>: Fresh installations (not upgrades) of PCF ER 1.8.10 or higher are <strong>not</strong> affected by this problem.</p>

When upgrading from PCF ERT 1.7.X to 1.8.0-1.8.8, deployments that included multiple instances of the Diego BBS VM would fail to upgrade.

### <a name="impact-bbs"></a>The Impact

Inconsistencies between diego datasets can result in app downtime or apps not successfully returning during a deploy.

#### Already Downloaded PCF ER 1.8.0-1.8.8

If you haven't attempted an upgrade, please download PCF ER 1.8.10 or higher and proceed with the instructions below

#### How to Upgrade Safely to PCF ER 1.8.10+ and/or Repair a Broken Cluster

This is applicable to all upgrade paths between 1.7.x to 1.8.10+. Upgrades from 1.8.x to 1.8.10+ should not require these steps if your Diego BBS cluster is already healthy. After you've successfully upgraded past 1.8.10, these steps are no longer necessary.

* For **Single node Diego BBS** instance configuration: No action required.
* For **Multi node Diego BBS** instance configuration: Pivotal recommends scaling down to one Diego BBS (see [the section below](#scale-bbs) for instructions) before attempting an upgrade. You can do this before or during the upgrade deployment. After the succesful upgrade deployment, scale back up to an HA configuration.

#### <a name="scale-bbs"></a>Scale Diego BBS to One Instance

In some cases you will need to scale down your Diego BBS cluster to one instance (please see above for a specific details around your upgrade path). To scale down to one instance:

1. Navigate to the **Settings** tab in the Pivotal Elastic Runtime Tile.
1. Select **Resource Config**.
1. Find the `Diego BBS` job.
1. Set **Instances** to `Automatic: 1`.
1. Save the **Resource Config**
1. Navigate to the **Installation Dashboard** and click **Apply Changes**
1. Upgrade the PCF Elastic Runtime Tile to a version greater than or equal to 1.8.10.
1. Navigate to the **Settings** tab in the Pivotal Elastic Runtime Tile.
1. Select **Resource Config**.
1. Find the `Diego BBS` job.
1. Reset **Instances** back to your originally configured value.
1. Save the **Resource Config**
1. At this point, you can continue your normal procedure for upgrading to the new version of PCF ERT.

## <a id="releases"></a> Releases

### <a id="1.8.22"></a> 1.8.22

* Patches a vulnerability in the Autoscaling service that allowed unprivileged users to impersonate other users with unauthenticated tokens.

  <table border="1" class="nice">
  <thead>
  <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>Stemcell</td><td>3263.12</td>
  </tr><tr>
    <td>cf</td><td>239</td>
  </tr><tr>
    <td>cf-autoscaling</td><td>36.2</td>
  </tr><tr>
    <td>cf-mysql</td><td>26.8</td>
  </tr><tr>
    <td>cflinuxfs2-rootfs</td><td>1.40.0</td>
  </tr><tr>
    <td>consul</td><td>108</td>
  </tr><tr>
    <td>diego</td><td>0.1485.0</td>
  </tr><tr>
    <td>dotnet-core-buildpack</td><td>1.0.4</td>
  </tr><tr>
    <td>etcd</td><td>60</td>
  </tr><tr>
    <td>garden-runc</td><td>1.0.2</td>
  </tr><tr>
    <td>mysql-backup</td><td>1.25.0</td>
  </tr><tr>
    <td>mysql-monitoring</td><td>6</td>
  </tr><tr>
    <td>notifications</td><td>31</td>
  </tr><tr>
    <td>notifications-ui</td><td>26</td>
  </tr><tr>
    <td>pivotal-account</td><td>1</td>
  </tr><tr>
    <td>push-apps-manager-release</td><td>652</td>
  </tr><tr>
    <td>routing</td><td>0.141.0</td>
  </tr><tr>
    <td>service-backup</td><td>14</td>
  </tr>
  </tbody>
  </table>

### <a id="1.8.21"></a> 1.8.21

* Patches a vulnerability in the Routing API that allowed unprivileged users to impersonate other users with unauthenticated tokens.

  <table border="1" class="nice">
  <thead>
  <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>Stemcell</td><td>3263.12</td>
  </tr><tr>
    <td>cf</td><td>239</td>
  </tr><tr>
    <td>cf-autoscaling</td><td>36</td>
  </tr><tr>
    <td>cf-mysql</td><td>26.8</td>
  </tr><tr>
    <td>cflinuxfs2-rootfs</td><td>1.40.0</td>
  </tr><tr>
    <td>consul</td><td>108</td>
  </tr><tr>
    <td>diego</td><td>0.1485.0</td>
  </tr><tr>
    <td>dotnet-core-buildpack</td><td>1.0.4</td>
  </tr><tr>
    <td>etcd</td><td>60</td>
  </tr><tr>
    <td>garden-runc</td><td>1.0.2</td>
  </tr><tr>
    <td>mysql-backup</td><td>1.25.0</td>
  </tr><tr>
    <td>mysql-monitoring</td><td>6</td>
  </tr><tr>
    <td>notifications</td><td>24</td>
  </tr><tr>
    <td>notifications-ui</td><td>22</td>
  </tr><tr>
    <td>pivotal-account</td><td>1</td>
  </tr><tr>
    <td>push-apps-manager-release</td><td>652</td>
  </tr><tr>
    <td>routing</td><td>0.141.0</td>
  </tr><tr>
    <td>service-backup</td><td>14</td>
  </tr>
  </tbody>
  </table>

### <a id="1.8.20"></a> 1.8.20

* Bumps the stemcell to 3263.12 to address the Linux kernel vulnerability described in USN-3151-2.
* Bumps the rootfs to version 1.91.0.
* Bumps UAA to 3.6.5, resolving a Tomcat CVE (CVE-2015-6816), and reduces the allowed cipher suites used when communicating to UAA.
  The accepted ciphers have been restricted to TLS\_ECDHE\_RSA\_WITH\_AES\_128\_GCM\_SHA256 and TLS\_ECDHE\_RSA\_WITH\_AES\_256\_GCM\_SHA384.
* Corrects a misconfiguration in the CloudController that prevented applications larger than 1MB from being uploaded.
* Patches Cloud Controller to prevent disabled buildpacks from being used pushing an application.
* Patches Cloud Controller to redact logging of application environment variables.
* Patches Cloud Controller to prevent SpaceAuditors from being able to stage applications.

  <table border="1" class="nice">
  <thead>
  <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>Stemcell</td><td>3263.12</td>
  </tr><tr>
    <td>cf</td><td>239</td>
  </tr><tr>
    <td>cf-autoscaling</td><td>36</td>
  </tr><tr>
    <td>cf-mysql</td><td>26.8</td>
  </tr><tr>
    <td>cflinuxfs2-rootfs</td><td>1.40.0</td>
  </tr><tr>
    <td>consul</td><td>108</td>
  </tr><tr>
    <td>diego</td><td>0.1485.0</td>
  </tr><tr>
    <td>dotnet-core-buildpack</td><td>1.0.4</td>
  </tr><tr>
    <td>etcd</td><td>60</td>
  </tr><tr>
    <td>garden-runc</td><td>1.0.2</td>
  </tr><tr>
    <td>mysql-backup</td><td>1.25.0</td>
  </tr><tr>
    <td>mysql-monitoring</td><td>6</td>
  </tr><tr>
    <td>notifications</td><td>24</td>
  </tr><tr>
    <td>notifications-ui</td><td>22</td>
  </tr><tr>
    <td>pivotal-account</td><td>1</td>
  </tr><tr>
    <td>push-apps-manager-release</td><td>652</td>
  </tr><tr>
    <td>routing</td><td>0.141.0</td>
  </tr><tr>
    <td>service-backup</td><td>14</td>
  </tr>
  </tbody>
  </table>

### <a id="1.8.19"></a> 1.8.19

* Resolves an issue with the Diego Cell download cache that could result in unexpected behavior.

  <table border="1" class="nice">
  <thead>
  <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>Stemcell</td><td>3263.8</td>
  </tr><tr>
    <td>cf</td><td>239</td>
  </tr><tr>
    <td>cf-autoscaling</td><td>36</td>
  </tr><tr>
    <td>cf-mysql</td><td>26.8</td>
  </tr><tr>
    <td>cflinuxfs2-rootfs</td><td>1.35.0</td>
  </tr><tr>
    <td>consul</td><td>108</td>
  </tr><tr>
    <td>diego</td><td>0.1485.0</td>
  </tr><tr>
    <td>dotnet-core-buildpack</td><td>1.0.4</td>
  </tr><tr>
    <td>etcd</td><td>60</td>
  </tr><tr>
    <td>garden-runc</td><td>1.0.2</td>
  </tr><tr>
    <td>mysql-backup</td><td>1.25.0</td>
  </tr><tr>
    <td>mysql-monitoring</td><td>6</td>
  </tr><tr>
    <td>notifications</td><td>24</td>
  </tr><tr>
    <td>notifications-ui</td><td>22</td>
  </tr><tr>
    <td>pivotal-account</td><td>1</td>
  </tr><tr>
    <td>push-apps-manager-release</td><td>652</td>
  </tr><tr>
    <td>routing</td><td>0.141.0</td>
  </tr><tr>
    <td>service-backup</td><td>14</td>
  </tr>
  </tbody>
  </table>

### <a id="1.8.18"></a> 1.8.18

* Reduces the allowed cipher suites used when communicating to components of Diego.
  The accepted ciphers have been restricted to `TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256` and `TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384`.

  <table border="1" class="nice">
  <thead>
  <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>Stemcell</td><td>3263.8</td>
  </tr><tr>
    <td>cf</td><td>239</td>
  </tr><tr>
    <td>cf-autoscaling</td><td>36</td>
  </tr><tr>
    <td>cf-mysql</td><td>26.8</td>
  </tr><tr>
    <td>cflinuxfs2-rootfs</td><td>1.35.0</td>
  </tr><tr>
    <td>consul</td><td>108</td>
  </tr><tr>
    <td>diego</td><td>0.1485.0</td>
  </tr><tr>
    <td>dotnet-core-buildpack</td><td>1.0.4</td>
  </tr><tr>
    <td>etcd</td><td>60</td>
  </tr><tr>
    <td>garden-runc</td><td>1.0.2</td>
  </tr><tr>
    <td>mysql-backup</td><td>1.25.0</td>
  </tr><tr>
    <td>mysql-monitoring</td><td>6</td>
  </tr><tr>
    <td>notifications</td><td>24</td>
  </tr><tr>
    <td>notifications-ui</td><td>22</td>
  </tr><tr>
    <td>pivotal-account</td><td>1</td>
  </tr><tr>
    <td>push-apps-manager-release</td><td>652</td>
  </tr><tr>
    <td>routing</td><td>0.141.0</td>
  </tr><tr>
    <td>service-backup</td><td>14</td>
  </tr>
  </tbody>
  </table>

### <a id="1.8.17"></a> 1.8.17

* Introduces a patch to prevent loss of application routes when the consul cluster becomes unreachable or loses quorum.
  Previously, the loss of the consul cluster would result in applications becoming unavailable as their routes were pruned from the routing table.
  Now, the route emitter will continue to update the router even while consul is down.
  Operators can monitor the `ConsulDownMode` metric for indication that the installation has detected this issue.

  <table border="1" class="nice">
  <thead>
  <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>Stemcell</td><td>3263.8</td>
  </tr><tr>
    <td>cf</td><td>239</td>
  </tr><tr>
    <td>cf-autoscaling</td><td>36</td>
  </tr><tr>
    <td>cf-mysql</td><td>26.8</td>
  </tr><tr>
    <td>cflinuxfs2-rootfs</td><td>1.35.0</td>
  </tr><tr>
    <td>consul</td><td>108</td>
  </tr><tr>
    <td>diego</td><td>0.1485.0</td>
  </tr><tr>
    <td>dotnet-core-buildpack</td><td>1.0.4</td>
  </tr><tr>
    <td>etcd</td><td>60</td>
  </tr><tr>
    <td>garden-runc</td><td>1.0.2</td>
  </tr><tr>
    <td>mysql-backup</td><td>1.25.0</td>
  </tr><tr>
    <td>mysql-monitoring</td><td>6</td>
  </tr><tr>
    <td>notifications</td><td>24</td>
  </tr><tr>
    <td>notifications-ui</td><td>22</td>
  </tr><tr>
    <td>pivotal-account</td><td>1</td>
  </tr><tr>
    <td>push-apps-manager-release</td><td>652</td>
  </tr><tr>
    <td>routing</td><td>0.141.0</td>
  </tr><tr>
    <td>service-backup</td><td>14</td>
  </tr>
  </tbody>
  </table>

### <a id="1.8.16"></a> 1.8.16

* Bumps UAA to address a Tomcat server vulnerability that could allow for remote code execution.

  <table border="1" class="nice">
  <thead>
  <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>Stemcell</td><td>3263.8</td>
  </tr><tr>
    <td>cf</td><td>239</td>
  </tr><tr>
    <td>cf-autoscaling</td><td>36</td>
  </tr><tr>
    <td>cf-mysql</td><td>26.8</td>
  </tr><tr>
    <td>cflinuxfs2-rootfs</td><td>1.35.0</td>
  </tr><tr>
    <td>consul</td><td>108</td>
  </tr><tr>
    <td>diego</td><td>0.1485.0</td>
  </tr><tr>
    <td>dotnet-core-buildpack</td><td>1.0.4</td>
  </tr><tr>
    <td>etcd</td><td>60</td>
  </tr><tr>
    <td>garden-runc</td><td>1.0.2</td>
  </tr><tr>
    <td>mysql-backup</td><td>1.25.0</td>
  </tr><tr>
    <td>mysql-monitoring</td><td>6</td>
  </tr><tr>
    <td>notifications</td><td>24</td>
  </tr><tr>
    <td>notifications-ui</td><td>22</td>
  </tr><tr>
    <td>pivotal-account</td><td>1</td>
  </tr><tr>
    <td>push-apps-manager-release</td><td>652</td>
  </tr><tr>
    <td>routing</td><td>0.141.0</td>
  </tr><tr>
    <td>service-backup</td><td>14</td>
  </tr>
  </tbody>
  </table>

### <a id="1.8.15"></a> 1.8.15

* Bumps the version of PCRE used in both haproxy and nginx to address multiple CVEs.
* Bumps the version of routing-release to 0.141.0 to address the same PCRE CVEs.
* Please see [https://pivotal.io/security](https://pivotal.io/security) for more information.

  <table border="1" class="nice">
  <thead>
  <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>Stemcell</td><td>3263.8</td>
  </tr><tr>
    <td>cf</td><td>239</td>
  </tr><tr>
    <td>cf-autoscaling</td><td>36</td>
  </tr><tr>
    <td>cf-mysql</td><td>26.8</td>
  </tr><tr>
    <td>cflinuxfs2-rootfs</td><td>1.35.0</td>
  </tr><tr>
    <td>consul</td><td>108</td>
  </tr><tr>
    <td>diego</td><td>0.1485.0</td>
  </tr><tr>
    <td>dotnet-core-buildpack</td><td>1.0.4</td>
  </tr><tr>
    <td>etcd</td><td>60</td>
  </tr><tr>
    <td>garden-runc</td><td>1.0.2</td>
  </tr><tr>
    <td>mysql-backup</td><td>1.25.0</td>
  </tr><tr>
    <td>mysql-monitoring</td><td>6</td>
  </tr><tr>
    <td>notifications</td><td>24</td>
  </tr><tr>
    <td>notifications-ui</td><td>22</td>
  </tr><tr>
    <td>pivotal-account</td><td>1</td>
  </tr><tr>
    <td>push-apps-manager-release</td><td>652</td>
  </tr><tr>
    <td>routing</td><td>0.141.0</td>
  </tr><tr>
    <td>service-backup</td><td>14</td>
  </tr>
  </tbody>
  </table>

### <a id="1.8.14"></a> 1.8.14

* Patches the Diego container runtime to improve the performance of the application of security group rules during application startup.
* Resolves an issue with the tcp-emitter and routing-api jobs on the Diego Cell, CloudController, and Router VMs that would prevent them from being stopped and started with the `bosh` CLI without manual intervention.
* Patches the Diego rep process to allow deployment of the Diego Cell VM into availability zones with names that contain spaces.

  <table border="1" class="nice">
  <thead>
  <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>Stemcell</td><td>3263.8</td>
  </tr><tr>
    <td>cf</td><td>239</td>
  </tr><tr>
    <td>cf-autoscaling</td><td>36</td>
  </tr><tr>
    <td>cf-mysql</td><td>26.8</td>
  </tr><tr>
    <td>cflinuxfs2-rootfs</td><td>1.35.0</td>
  </tr><tr>
    <td>consul</td><td>108</td>
  </tr><tr>
    <td>diego</td><td>0.1485.0</td>
  </tr><tr>
    <td>dotnet-core-buildpack</td><td>1.0.4</td>
  </tr><tr>
    <td>etcd</td><td>60</td>
  </tr><tr>
    <td>garden-runc</td><td>1.0.2</td>
  </tr><tr>
    <td>mysql-backup</td><td>1.25.0</td>
  </tr><tr>
    <td>mysql-monitoring</td><td>6</td>
  </tr><tr>
    <td>notifications</td><td>24</td>
  </tr><tr>
    <td>notifications-ui</td><td>22</td>
  </tr><tr>
    <td>pivotal-account</td><td>1</td>
  </tr><tr>
    <td>push-apps-manager-release</td><td>652</td>
  </tr><tr>
    <td>routing</td><td>0.138.0</td>
  </tr><tr>
    <td>service-backup</td><td>14</td>
  </tr>
  </tbody>
  </table>

### <a id="1.8.13"></a> 1.8.13

* Bumps garden-runc to v1.0.2. See the [release notes](https://github.com/cloudfoundry/garden-runc-release/releases/tag/v1.0.2) for more information.
* Exposes the "Request Max Buffer Size" property for HAProxy deployments on the "Networking" page. This property determines the maximum request header payload that HAProxy will accept.
* The .Net Core buildpack is now available. For more information, see the [release notes](https://github.com/cloudfoundry/dotnet-core-buildpack/releases/tag/v1.0.4).
* Bumps the stack rootfs to patch the USN-3096-1 and USN-3088-1 vulnerabilities.
* UAA has been patched to correctly return the Basic WWW-Authenticate header if client credentials are not provided in the request to /oauth/token endpoint.
* Exposes the "Signature Algorithm" property on the "Authentication and Enterprise SSO" page. This will allow operators to specify what kind of signature they use for SAML signed requests.
* The LDAP configuration on the "Authentication and Enterprise SSO" page now allows for multiple LDAP server entries.
* Additionally, the LDAP configuration on the "Authentication and Enterprise SSO" page allows the operator to configure LDAP referrals.

  <table border="1" class="nice">
  <thead>
  <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>Stemcell</td><td>3263.8</td>
  </tr><tr>
    <td>cf</td><td>239</td>
  </tr><tr>
    <td>cf-autoscaling</td><td>36</td>
  </tr><tr>
    <td>cf-mysql</td><td>26.8</td>
  </tr><tr>
    <td>cflinuxfs2-rootfs</td><td>1.35.0</td>
  </tr><tr>
    <td>consul</td><td>108</td>
  </tr><tr>
    <td>diego</td><td>0.1485.0</td>
  </tr><tr>
    <td>dotnet-core-buildpack</td><td>1.0.4</td>
  </tr><tr>
    <td>etcd</td><td>60</td>
  </tr><tr>
    <td>garden-runc</td><td>1.0.2</td>
  </tr><tr>
    <td>mysql-backup</td><td>1.25.0</td>
  </tr><tr>
    <td>mysql-monitoring</td><td>6</td>
  </tr><tr>
    <td>notifications</td><td>24</td>
  </tr><tr>
    <td>notifications-ui</td><td>22</td>
  </tr><tr>
    <td>pivotal-account</td><td>1</td>
  </tr><tr>
    <td>push-apps-manager-release</td><td>652</td>
  </tr><tr>
    <td>routing</td><td>0.138.0</td>
  </tr><tr>
    <td>service-backup</td><td>14</td>
  </tr>
  </tbody>
  </table>

### <a id="1.8.12"></a> 1.8.12

* Patches several UAA clients to remove an open redirect vulnerability in response to CVE-2016-6657. Please see [https://pivotal.io/security](https://pivotal.io/security) for more information.
* Prevents Diego Cells from hanging on start-up when attempting to detect their availability zone.

  <table border="1" class="nice">
  <thead>
  <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>Stemcell</td><td>3263.8</td>
  </tr><tr>
    <td>cf</td><td>239</td>
  </tr><tr>
    <td>cf-autoscaling</td><td>36</td>
  </tr><tr>
    <td>cf-mysql</td><td>26.8</td>
  </tr><tr>
    <td>cflinuxfs2-rootfs</td><td>1.33.0</td>
  </tr><tr>
    <td>consul</td><td>108</td>
  </tr><tr>
    <td>diego</td><td>0.1485.0</td>
  </tr><tr>
    <td>etcd</td><td>60</td>
  </tr><tr>
    <td>garden-runc</td><td>1.0.0</td>
  </tr><tr>
    <td>mysql-backup</td><td>1.25.0</td>
  </tr><tr>
    <td>mysql-monitoring</td><td>6</td>
  </tr><tr>
    <td>notifications</td><td>24</td>
  </tr><tr>
    <td>notifications-ui</td><td>22</td>
  </tr><tr>
    <td>pivotal-account</td><td>1</td>
  </tr><tr>
    <td>push-apps-manager-release</td><td>652</td>
  </tr><tr>
    <td>routing</td><td>0.138.0</td>
  </tr><tr>
    <td>service-backup</td><td>14</td>
  </tr>
  </tbody>
  </table>

### <a id="1.8.11"></a> 1.8.11

* Patches Cloud Controller to obfuscate custom buildpack properties that may contain credentials in response to CVE-2016-6658. Please see [https://pivotal.io/security](https://pivotal.io/security) for more information.
* Patches the internal MySQL logging mechanism to prevent accidental credential leaks.
* Bumps garden-runc to v1.0.0.

  <table border="1" class="nice">
  <thead>
  <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>Stemcell</td><td>3263.8</td>
  </tr><tr>
    <td>cf</td><td>239</td>
  </tr><tr>
    <td>cf-autoscaling</td><td>36</td>
  </tr><tr>
    <td>cf-mysql</td><td>26.8</td>
  </tr><tr>
    <td>cflinuxfs2-rootfs</td><td>1.33.0</td>
  </tr><tr>
    <td>consul</td><td>108</td>
  </tr><tr>
    <td>diego</td><td>0.1485.0</td>
  </tr><tr>
    <td>etcd</td><td>60</td>
  </tr><tr>
    <td>garden-runc</td><td>1.0.0</td>
  </tr><tr>
    <td>mysql-backup</td><td>1.25.0</td>
  </tr><tr>
    <td>mysql-monitoring</td><td>6</td>
  </tr><tr>
    <td>notifications</td><td>24</td>
  </tr><tr>
    <td>notifications-ui</td><td>22</td>
  </tr><tr>
    <td>pivotal-account</td><td>1</td>
  </tr><tr>
    <td>push-apps-manager-release</td><td>652</td>
  </tr><tr>
    <td>routing</td><td>0.138.0</td>
  </tr><tr>
    <td>service-backup</td><td>14</td>
  </tr>
  </tbody>
  </table>

### <a id="1.8.10"></a> 1.8.10

* Fixes [CVE-2016-5195](http://people.canonical.com/~ubuntu-security/cve/2016/CVE-2016-5195.html) for more information see [https://pivotal.io/security](https://pivotal.io/security).

  <table border="1" class="nice">
  <thead>
  <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>Stemcell</td><td>3263.8</td>
  </tr><tr>
    <td>cf</td><td>239</td>
  </tr><tr>
    <td>cf-autoscaling</td><td>36</td>
  </tr><tr>
    <td>cf-mysql</td><td>26.6</td>
  </tr><tr>
    <td>cflinuxfs2-rootfs</td><td>1.33.0</td>
  </tr><tr>
    <td>consul</td><td>108</td>
  </tr><tr>
    <td>diego</td><td>0.1485.0</td>
  </tr><tr>
    <td>etcd</td><td>60</td>
  </tr><tr>
    <td>garden-runc</td><td>0.9.2</td>
  </tr><tr>
    <td>mysql-backup</td><td>1.25.0</td>
  </tr><tr>
    <td>mysql-monitoring</td><td>6</td>
  </tr><tr>
    <td>notifications</td><td>24</td>
  </tr><tr>
    <td>notifications-ui</td><td>17</td>
  </tr><tr>
    <td>pivotal-account</td><td>1</td>
  </tr><tr>
    <td>push-apps-manager-release</td><td>652</td>
  </tr><tr>
    <td>routing</td><td>0.138.0</td>
  </tr><tr>
    <td>service-backup</td><td>14</td>
  </tr>
  </tbody>
  </table>

### <a id="1.8.9"></a> 1.8.9

If upgrading to 1.8.9 from 1.7, see the [Resolve Diego BBS Issue when Upgrading from 1.7 to 1.8](#upgrade-issue) section above. 

* Customers with f5 load balancers can configure `drain_wait` and `load_balancer_healthy_threshold` on the router.
* UAA now allows for a custom regular expression to be set for Proxy IPs.
* A patch to the Cloud Controller resolves an issue that caused monit to hang when the NFS server becomes unavailable.
* This release separates Diego BBS and general etcd into their own clusters. These components were previously part of the same cluster.

  <table border="1" class="nice">
  <thead>
  <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>Stemcell</td><td>3263.7</td>
  </tr><tr>
    <td>cf</td><td>239</td>
  </tr><tr>
    <td>cf-autoscaling</td><td>36</td>
  </tr><tr>
    <td>cf-mysql</td><td>26.6</td>
  </tr><tr>
    <td>cflinuxfs2-rootfs</td><td>1.33.0</td>
  </tr><tr>
    <td>consul</td><td>108</td>
  </tr><tr>
    <td>diego</td><td>0.1485.0</td>
  </tr><tr>
    <td>etcd</td><td>60</td>
  </tr><tr>
    <td>garden-runc</td><td>0.9.2</td>
  </tr><tr>
    <td>mysql-backup</td><td>1.25.0</td>
  </tr><tr>
    <td>mysql-monitoring</td><td>6</td>
  </tr><tr>
    <td>notifications</td><td>24</td>
  </tr><tr>
    <td>notifications-ui</td><td>17</td>
  </tr><tr>
    <td>pivotal-account</td><td>1</td>
  </tr><tr>
    <td>push-apps-manager-release</td><td>652</td>
  </tr><tr>
    <td>routing</td><td>0.138.0</td>
  </tr><tr>
    <td>service-backup</td><td>14</td>
  </tr>
  </tbody>
  </table>

### <a id="1.8.8"></a> 1.8.8

Bumps the required stemcell version to 3263.7. This stemcell is based on the 4.4 Linux kernel.
Elastic Runtime v1.8.8 uses Garden-runC instead of Garden-Linux as the Garden backend for our container technology.
Documentation for the Garden-runC runtime can be found at https://github.com/cloudfoundry/garden-runc-release.

Advantages of Garden-runC over Garden-Linux are:

* AppArmor is configured and enforced by default and out-of-the-box for all unprivileged containers.
* Seccomp whitelisting restricts the set of system calls a container can access, greatly reducing the surface area for break-out exploits. This is set up out-of-the-box; you don't need to do anything.
* The new Garden code base is simpler and more modular, allowing pluggable networking and pluggable rootfs management.
It enables container-to-container networking and the new "grootfs" OCI-compliant rootfs downloader.
* Garden-runC uses the same low-level container execution code as docker/k8s for running containers, so that your container images run the same in PCF as elsewhere.

Lastly, Garden-runC has been successfully running 100% of the production traffic on Pivotal Web Services (PWS) for around a month, and has been tested at lower load for some months before that.
However, as always, make sure to test in a staging environment before deploying to production.

  <table border="1" class="nice">
  <thead>
  <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>Stemcell</td><td>3263.7</td>
  </tr><tr>
    <td>cf</td><td>239</td>
  </tr><tr>
    <td>cf-autoscaling</td><td>36</td>
  </tr><tr>
    <td>cf-mysql</td><td>26.6</td>
  </tr><tr>
    <td>cflinuxfs2-rootfs</td><td>1.33.0</td>
  </tr><tr>
    <td>consul</td><td>108</td>
  </tr><tr>
    <td>diego</td><td>0.1485.0</td>
  </tr><tr>
    <td>etcd</td><td>60</td>
  </tr><tr>
    <td>garden-runc</td><td>0.9.2</td>
  </tr><tr>
    <td>mysql-backup</td><td>1.25.0</td>
  </tr><tr>
    <td>mysql-monitoring</td><td>6</td>
  </tr><tr>
    <td>notifications</td><td>24</td>
  </tr><tr>
    <td>notifications-ui</td><td>17</td>
  </tr><tr>
    <td>pivotal-account</td><td>1</td>
  </tr><tr>
    <td>push-apps-manager-release</td><td>652</td>
  </tr><tr>
    <td>routing</td><td>0.138.0</td>
  </tr><tr>
    <td>service-backup</td><td>14</td>
  </tr>
  </tbody>
  </table>

### <a id="1.8.7"></a> 1.8.7

Includes a fix for the Critical Vulnerability issue CVE-2016-6655. See https://pivotal.io/security for more information.

  <table border="1" class="nice">
  <thead>
  <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>Stemcell</td><td>3262.19</td>
  </tr><tr>
    <td>cf</td><td>239</td>
  </tr><tr>
    <td>cf-autoscaling</td><td>36</td>
  </tr><tr>
    <td>cf-mysql</td><td>26.6</td>
  </tr><tr>
    <td>cflinuxfs2-rootfs</td><td>1.33.0</td>
  </tr><tr>
    <td>consul</td><td>108</td>
  </tr><tr>
    <td>diego</td><td>0.1485.0</td>
  </tr><tr>
    <td>etcd</td><td>60</td>
  </tr><tr>
    <td>garden-linux</td><td>0.342.0</td>
  </tr><tr>
    <td>mysql-backup</td><td>1.25.0</td>
  </tr><tr>
    <td>mysql-monitoring</td><td>6</td>
  </tr><tr>
    <td>notifications</td><td>24</td>
  </tr><tr>
    <td>notifications-ui</td><td>17</td>
  </tr><tr>
    <td>pivotal-account</td><td>1</td>
  </tr><tr>
    <td>push-apps-manager-release</td><td>652</td>
  </tr><tr>
    <td>routing</td><td>0.138.0</td>
  </tr><tr>
    <td>service-backup</td><td>14</td>
  </tr>
  </tbody>
  </table>

### <a id="1.8.6"></a> 1.8.6

Adds the ability to perform an HTTP health check against the router VMs. This health-check endpoint is located at port `8080` on the `/health` path.

Fixes an issue with running Windows apps in Diego.

Relaxes the minimum upgrade version back to 1.7.20. This was conservatively raised to 1.7.21, but it was found to be unnecessarily restrictive.

Includes a patch that fixes the default value for the WebDAV network. This value was previously misconfigured with an incorrect network range.
The result of deploying with this misconfiguration could result in a failed deployment depending upon what network ranges your deployment uses.
After redeploying with this corrected default, if you find that the smoke tests fail with an error message indicating missing buildpacks, manually rolling the `cloud_controller` VMs should resolve the issue.

  <table border="1" class="nice">
  <thead>
  <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>Stemcell</td><td>3262.19</td>
  </tr><tr>
    <td>cf</td><td>239</td>
  </tr><tr>
    <td>cf-autoscaling</td><td>36</td>
  </tr><tr>
    <td>cf-mysql</td><td>26.6</td>
  </tr><tr>
    <td>cflinuxfs2-rootfs</td><td>1.33.0</td>
  </tr><tr>
    <td>consul</td><td>108</td>
  </tr><tr>
    <td>diego</td><td>0.1485.0</td>
  </tr><tr>
    <td>etcd</td><td>60</td>
  </tr><tr>
    <td>garden-linux</td><td>0.342.0</td>
  </tr><tr>
    <td>mysql-backup</td><td>1.25.0</td>
  </tr><tr>
    <td>mysql-monitoring</td><td>5</td>
  </tr><tr>
    <td>notifications</td><td>24</td>
  </tr><tr>
    <td>notifications-ui</td><td>17</td>
  </tr><tr>
    <td>pivotal-account</td><td>1</td>
  </tr><tr>
    <td>push-apps-manager-release</td><td>652</td>
  </tr><tr>
    <td>routing</td><td>0.138.0</td>
  </tr><tr>
    <td>service-backup</td><td>14</td>
  </tr>
  </tbody>
  </table>

### <a id="1.8.5"></a> 1.8.5

Adds the ability to use Google Cloud Storage for your File Storage configuration.

Adds an HTTP frontend healthcheck to the HAProxy job, at the /health endpoint.

Fixes a bug where the apps-usage service could lose database connectivity while the internal mysql proxies were being deployed.
This only affects deployments using internal mysql as a database.

Additionally, this release changes the route for the switchboard UI for the internal mysql proxies.
Previously, those dashboards were located at `proxy-X-p-mysql.internal.SYSTEM_DOMAIN`.
Now they can be found at `proxy-X-p-mysql-ert.SYSTEM_DOMAIN`.
This should remove the need to include an extra SAN entry in the TLS certificates for the platform.

  <table border="1" class="nice">
  <thead>
  <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>Stemcell</td><td>3262.19</td>
  </tr><tr>
    <td>cf</td><td>239</td>
  </tr><tr>
    <td>cf-autoscaling</td><td>36</td>
  </tr><tr>
    <td>cf-mysql</td><td>26.6</td>
  </tr><tr>
    <td>cflinuxfs2-rootfs</td><td>1.33.0</td>
  </tr><tr>
    <td>consul</td><td>108</td>
  </tr><tr>
    <td>diego</td><td>0.1485.0</td>
  </tr><tr>
    <td>etcd</td><td>60</td>
  </tr><tr>
    <td>garden-linux</td><td>0.342.0</td>
  </tr><tr>
    <td>mysql-backup</td><td>1.25.0</td>
  </tr><tr>
    <td>mysql-monitoring</td><td>5</td>
  </tr><tr>
    <td>notifications</td><td>24</td>
  </tr><tr>
    <td>notifications-ui</td><td>17</td>
  </tr><tr>
    <td>pivotal-account</td><td>1</td>
  </tr><tr>
    <td>push-apps-manager-release</td><td>652</td>
  </tr><tr>
    <td>routing</td><td>0.135.0</td>
  </tr><tr>
    <td>service-backup</td><td>14</td>
  </tr>
  </tbody>
  </table>

### <a id="1.8.4"></a> 1.8.4

Bumps UAA to version 3.6.1 to make upgrades possible from Elastic Runtime versions 1.7.24 and greater.

Also introduces a field in the Advanced Features section which allows you to add any networks that need access to the internal file storage of Elastic Runtime (WebDAV server). The default whitelist includes all RFC 1918 private IP ranges, so if your Elastic Runtime deployment is not using an RFC 1918 network for its private network, then you must add your network to this list. Otherwise, you do not need to do anything here.

  <table border="1" class="nice">
  <thead>
  <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>Stemcell</td><td>3262.19</td>
  </tr><tr>
    <td>cf</td><td>239</td>
  </tr><tr>
    <td>cf-autoscaling</td><td>36</td>
  </tr><tr>
    <td>cf-mysql</td><td>26.6</td>
  </tr><tr>
    <td>cflinuxfs2-rootfs</td><td>1.33.0</td>
  </tr><tr>
    <td>consul</td><td>108</td>
  </tr><tr>
    <td>diego</td><td>0.1485.0</td>
  </tr><tr>
    <td>etcd</td><td>60</td>
  </tr><tr>
    <td>garden-linux</td><td>0.342.0</td>
  </tr><tr>
    <td>mysql-backup</td><td>1.25.0</td>
  </tr><tr>
    <td>mysql-monitoring</td><td>5</td>
  </tr><tr>
    <td>notifications</td><td>24</td>
  </tr><tr>
    <td>notifications-ui</td><td>17</td>
  </tr><tr>
    <td>pivotal-account</td><td>1</td>
  </tr><tr>
    <td>push-apps-manager-release</td><td>652</td>
  </tr><tr>
    <td>routing</td><td>0.135.0</td>
  </tr><tr>
    <td>service-backup</td><td>14</td>
  </tr>
  </tbody>
  </table>

### <a id="1.8.3"></a> 1.8.3

Note: Do not upgrade to this version if you are starting with 1.7.20, or any version between 1.7.23 and 1.8.0 (non-inclusive).

Patches USN-3087-1, USN-3087-2, CVE-2016-6662, USN-3040-1, and USN-2953-1. Additional info can be found at https://pivotal.io/security.

  <table border="1" class="nice">
  <thead>
  <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>Stemcell</td><td>3262.16</td>
  </tr><tr>
    <td>cf</td><td>239</td>
  </tr><tr>
    <td>cf-autoscaling</td><td>36</td>
  </tr><tr>
    <td>cf-mysql</td><td>26.6</td>
  </tr><tr>
    <td>cflinuxfs2-rootfs</td><td>1.33.0</td>
  </tr><tr>
    <td>consul</td><td>108</td>
  </tr><tr>
    <td>diego</td><td>0.1485.0</td>
  </tr><tr>
    <td>etcd</td><td>60</td>
  </tr><tr>
    <td>garden-linux</td><td>0.342.0</td>
  </tr><tr>
    <td>mysql-backup</td><td>1.25.0</td>
  </tr><tr>
    <td>mysql-monitoring</td><td>5</td>
  </tr><tr>
    <td>notifications</td><td>24</td>
  </tr><tr>
    <td>notifications-ui</td><td>17</td>
  </tr><tr>
    <td>pivotal-account</td><td>1</td>
  </tr><tr>
    <td>push-apps-manager-release</td><td>652</td>
  </tr><tr>
    <td>routing</td><td>0.135.0</td>
  </tr><tr>
    <td>service-backup</td><td>14</td>
  </tr>
  </tbody>
  </table>

### <a id="1.8.2"></a> 1.8.2

Note: Do not upgrade to this version if you are starting with 1.7.20, or any version between 1.7.23 and 1.8.0 (non-inclusive).

Fixes an issue where having SSL validation enabled while using the internal file storage in Elastic Runtime was preventing successful retrieval of files.

  <table border="1" class="nice">
  <thead>
  <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>Stemcell</td><td>3262.12</td>
  </tr><tr>
    <td>cf</td><td>239</td>
  </tr><tr>
    <td>cf-autoscaling</td><td>36</td>
  </tr><tr>
    <td>cf-mysql</td><td>26.4</td>
  </tr><tr>
    <td>cflinuxfs2-rootfs</td><td>1.26.0</td>
  </tr><tr>
    <td>consul</td><td>108</td>
  </tr><tr>
    <td>diego</td><td>0.1485.0</td>
  </tr><tr>
    <td>etcd</td><td>60</td>
  </tr><tr>
    <td>garden-linux</td><td>0.342.0</td>
  </tr><tr>
    <td>mysql-backup</td><td>1.25.0</td>
  </tr><tr>
    <td>mysql-monitoring</td><td>5</td>
  </tr><tr>
    <td>notifications</td><td>24</td>
  </tr><tr>
    <td>notifications-ui</td><td>17</td>
  </tr><tr>
    <td>pivotal-account</td><td>1</td>
  </tr><tr>
    <td>push-apps-manager-release</td><td>652</td>
  </tr><tr>
    <td>routing</td><td>0.135.0</td>
  </tr><tr>
    <td>service-backup</td><td>14</td>
  </tr>
  </tbody>
  </table>

### <a id="1.8.1"></a> 1.8.1

Note: Do not upgrade to this version if you are starting with 1.7.20, or any version between 1.7.23 and 1.8.0 (non-inclusive).

Patches CVE-2016-6651. Additional info can be found at https://pivotal.io/security.

  <table border="1" class="nice">
  <thead>
  <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>Stemcell</td><td>3262.12</td>
  </tr><tr>
    <td>cf</td><td>239</td>
  </tr><tr>
    <td>cf-autoscaling</td><td>36</td>
  </tr><tr>
    <td>cf-mysql</td><td>26.4</td>
  </tr><tr>
    <td>cflinuxfs2-rootfs</td><td>1.26.0</td>
  </tr><tr>
    <td>consul</td><td>108</td>
  </tr><tr>
    <td>diego</td><td>0.1485.0</td>
  </tr><tr>
    <td>etcd</td><td>60</td>
  </tr><tr>
    <td>garden-linux</td><td>0.342.0</td>
  </tr><tr>
    <td>mysql-backup</td><td>1.25.0</td>
  </tr><tr>
    <td>mysql-monitoring</td><td>5</td>
  </tr><tr>
    <td>notifications</td><td>24</td>
  </tr><tr>
    <td>notifications-ui</td><td>17</td>
  </tr><tr>
    <td>pivotal-account</td><td>1</td>
  </tr><tr>
    <td>push-apps-manager-release</td><td>652</td>
  </tr><tr>
    <td>routing</td><td>0.135.0</td>
  </tr><tr>
    <td>service-backup</td><td>14</td>
  </tr>
  </tbody>
  </table>

## <a id="upgrade"></a>How to Upgrade

The procedure for upgrading to Pivotal Cloud Foundry Elastic Runtime v1.8 is documented in the [Upgrading Pivotal Cloud Foundry](../../customizing/upgrading-pcf.html) topic. When upgrading to v1.8, be aware of the following upgrade considerations:

* Before upgrading to PCF v1.8, remove any product tiles that are no longer supported in PCF. See [Review and Remove Unsupported Products](../../customizing/upgrading-pcf.html#remove-products).

* After you upgrade to Ops Manager v1.8, you must immediately upgrade to Elastic Runtime v1.8. In addition some product tiles must be upgraded in lockstep with the Elastic Runtime tile. If you are a customer upgrading from PCF 1.7 to PCF 1.8 and are using any of products listed in [Upgrade Elastic Runtime and Product Tiles](../../customizing/upgrading-pcf.html#upgrade_products), you must upgrade to the specified tile version when you upgrade the Elastic Runtime tile to v1.8.

* Some partner service tiles may currently be incompatible with PCF v1.8. Pivotal is working with partners to ensure their tiles are being updated to work with the latest versions of PCF. For information about which partner service releases are currently compatible with PCF v1.8, review the appropriate partners services release documentation at [http://docs.pivotal.io](http://docs.pivotal.io), or contact the partner organization that produces the tile. 

* Apps Manager requires the NodeJS Buildpack 1.5.14 or higher.

## <a id='versions'></a> New Features in Elastic Runtime v1.8.0

### <a id='routing'></a> Routing

- TCP Routing enables developers to run apps on PCF that support non-HTTP TCP protocols. See the [HTTP vs TCP Routes](../../devguide/deploy-apps/routes-domains.html#http-vs-tcp-routes) topic for more information.
   - To support this, routing components fetch tokens from UAA by calling that component directly over TLS. The cert hosted by UAA is generated by Operations Manager.
- Some processes on the Gorouter job no longer run as root.
- Route services whose domain names are resolved using EDNS0 are now supported.

### <a id='authen'></a> Authentication and Authorization

- Apps Manager now supports inviting external users from LDAP & SAML user stores. See the [Adding Existing SAML or LDAP Users to a Pivotal Cloud Foundry Deployment](../../opsguide/external-user-management.html) topic for more information. 

- PCF Admin role can now be derived from SAML group memberships. See the [Grant Admin Permissions to an External Group (SAML or LDAP)](../../adminguide/uaa-user-management.html#external-group) topic for more information.

- Basic User Attributes including Email, First Name, and Last Name can now be derived from the the SAML or LDAP enabled external user store. See the [Retrieve User Email Addresses](../../adminguide/uaa-user-management.html#retrieving-email-addresses) topic for more information.

- The Login prompts displayed on the Login Page and in the CF CLI can now be configured. See the [Configuring Authentication and Enterprise SSO for Elastic Runtime](../../opsguide/auth-sso.html) topic for more information.

- New API Docs for UAA are now available at [http://docs.cloudfoundry.org/api/uaa/](http://docs.cloudfoundry.org/api/uaa/).

### <a id='docker'></a> Docker Proxy Server

This feature allows you to put a proxy server between your PCF deployment and Docker Hub for access to image files.

See the [Set Proxies for Docker Trusted Registries](../../opsguide/docker-registry.html#proxy) topic for more information.

### <a id='pivotalaccount'></a> Pivotal Account User Management Tool

Pivotal Account is a user management tool that allows users to create and manage their accounts. With Pivotal Account users can access apps assigned to their accounts as well as manage their apps. See the [Enabling Pivotal Account](../../opsguide/pivotal-account.html) topic for more information. 

### <a id='appcontainers'></a> Unprivileged App Containers

You can now switch off privileged containers for your apps.

See the [Understanding Container Security](../../concepts/container-security.html) topic for more information.

### <a id='sses3'></a> AWS SSE-S3

External file storage existing as blobstores for Cloud Controller can now be encrypted at rest using SSE-S3 on any IAAS supported by PCF. Existing blobs are not encrypted.

For example, see the [Configure File Storage](../../customizing/config-er-vmware.html#filestore-config) topic for more information on configuring SSE-S3 for VSphere.

### <a id='webdav'></a> NFS Migration to WebDAV

The internal file storage provisioned by Cloud Foundry for Cloud Controller files has been switched from an NFS server to the WebDAV protocol. There is no actual data migration as part of this switch. The protocol changes on the file server. When you upgrade to Elastic Runtime v1.8.0 or later, you are automatically switched over.

See this [Knowledge Base article](https://discuss.zendesk.com/hc/en-us/articles/217982188-How-to-use-Elastic-Runtime-blob-storage-data-) for more information about file storage. 

### <a id='sshproxy'></a> Configurable SSH Proxy for Diego Containers

As of PCF v1.8.0, you can specify static IP addresses for the Diego Brain job, which allows you to configure a load balancer to forward SSH traffic over port 2222 to these SSH proxy IPs. Configuring a load balancer for Diego Brain IP addresses allows SSH access to app containers.

For example, see the [Configure Networking](../../customizing/cloudform-er-config.html#networking) topic for more information.

### <a id='consoledeprecation'></a> Console Database Removed

With the introduction of a new Apps Manager app written in Javascript, there is no longer a need for a backend to this app. Therefore, the Apps Manager database (`console`) is no longer required by the Elastic Runtime tile. After a successful upgrade to PCF v1.8. you can safely scale the Apps Manager database (postgres) job to `0` in the **Resource Config** page of the Elastic Runtime tile. However, if you selected MySQL as the backend database for `console` during initial Elastic Runtime deployment, you can drop this database from the MySQL server yourself. If you keep the database, you no longer need to backup and restore it.

### <a id='collectordeprecate'></a> Collector Deprecation

As of PCF v1.8.0, the Collector job on Elastic Runtime is deprecated and no longer used by any PCF services. If you are upgrading to PCF v1.8.0 from PCF v1.6.x (via the PCF v1.7.x upgrade path) and previously used the Collector job to obtain log data from legacy DEA-based applications, you can safely scale the job down to zero instances after upgrading to both JMX Bridge (Ops Metrics v1.7.0) and PCF ERT v1.7.0 or higher.

### <a id='apivisible'></a> API Environment Variable Visibility

Similar to `space_developer_env_var_visibility`, the new feature flag `env_var_visibility` can be disabled to deny access to `/v2/apps/:guid/env` for all users, including administrators. 

See the [Feature Flags](../../adminguide/listing-feature-flags.html#flags) topic for more information.

### <a id='servicebrokerenhance'></a> Service Broker Improvements

Service brokers can respond with an `operation` string in the body of responses for asynchronous operations. This string will be returned to the broker when the Cloud Controller polls for the state of asynchronous operations (see below). For more information, see the response body for [Provisioning](../../services/api-v2.9.html#provisioning), [Deprovisioning](../../services/api-v2.9.html#deprovisioning), and [Updating](../../services/api-v2.9.html#updating_service_instance).

Service brokers will now receive `service_id`, `plan_id`, and `operation` when polled for last operation state by the Cloud Controller. These extra query parameters can be used by brokers to help determine the state of the last operation. See [Polling Last Operation](../../services/api-v2.9.html#polling) for more information.

### <a id='cli_v3_support'></a> Cloud Foundry CLI v3 Plugin

This release of Elastic Runtime includes the Cloud Foundry CLI v3 plugin, which works with the Cloud Controller API v3. The CLI v3 plugin is useful for experimenting with the Cloud Controller v3 API without having to curl an oauth token. The Cloud Controller v3 API is under active development and is currently experimental. For more information on how to install and use the plugin, see the [CLI Plugin v3 README](https://github.com/cloudfoundry/v3-cli-plugin).

## <a id='knownissues'></a> Known Issues

This section lists new and existing known issues for Elastic Runtime.

### <a id='newissues'></a> New Issues

* Do not upgrade to versions 1.8.0 - 1.8.3 if you are starting with 1.7.20, or any 1.7.x version greater than 1.7.23.

* In Elastic Runtime 1.8.0 - 1.8.2, if you are using a non-RFC 1918 network as your private network for the deployment and internal file storage for Cloud Controller, then you will not be able to push apps to the system. 1.8.3 will address this issue by allowing you to specify a non-RFC 1918 network that you want to use.

* In Elastic Runtime 1.8.0 and 1.8.1, if you are using the internal file storage for Cloud Controller and you have the "Disable SSL certificate verification for this environment" checkbox unchecked, you will not be able to push apps to the system. 1.8.2 addresses this issue.

* If you choose to enable TCP routing, the reservable port range cannot be modified after deployment. This will be made possible in the next patch release.

* If you choose to enable TCP routing, you must also add the TCP routing domain via the cf CLI after deploying Elastic Runtime. The TCP routing domain is not configurable in the Elastic Runtime tile.

* If you choose to enable TCP routing, do not remove etcd data stores during failure recovery procedures since router group data added by the routing API is not ephemeral.

* Customers using an additional NodeJS buildpack or who have replaced the system NodeJS buildpack may encounter deployment issues with Apps Manager. Please contact support if you encounter problems deploying Apps Manager.

### <a id='existingissues'></a> Existing Issues

* The version of the PHP Buildpack included with 1.8.0 is vulnerable to multiple CVEs [[1](https://pivotal.io/security/cve-2016-6639)] [[2](https://pivotal.io/security/usn-3045-1)]. To mitigate these issues, update the PHP buildpack to the newest version as part of the 1.8.0 upgrade or new installation.

* Consul server cluster can fail to recover from quorum loss. See the [Consul fails to start during upgrade in PCF](https://discuss.pivotal.io/hc/en-us/articles/218196687-Consul-fails-to-start-during-upgrade-in-PCF) knowledge base article for how to recover from this issue.

* etcd and Consul clusters do not self-heal in cases where they happen to enter split-brain. 
* Disaster recovery for etcd or Consul clusters still requires manual intervention.

* The Cloud Foundry CLI command for viewing application files, `cf files`, does not work with apps on Diego.

* .NET support on Windows cells does not support the same level of security and isolation as seen on Linux cells. At this time, it is only recommended for running "trusted" apps.

* At this time, the container accounts on Windows cells must have permissions to log on locally, which may not be the default.

* Application file names on Windows cells are limited to maximum length of 100 characters. As a workaround, make sure that all filenames in an application directory are shorter than 100 characters before pushing.

  <table border="1" class="nice">
  <thead>
  <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>Stemcell</td><td>3262.12</td>
  </tr><tr>
    <td>cf</td><td>239</td>
  </tr><tr>
    <td>cf-autoscaling</td><td>36</td>
  </tr><tr>
    <td>cf-mysql</td><td>26.4</td>
  </tr><tr>
    <td>cflinuxfs2-rootfs</td><td>1.26.0</td>
  </tr><tr>
    <td>consul</td><td>108</td>
  </tr><tr>
    <td>diego</td><td>0.1482.0</td>
  </tr><tr>
    <td>etcd</td><td>60</td>
  </tr><tr>
    <td>garden-linux</td><td>0.342.0</td>
  </tr><tr>
    <td>mysql-backup</td><td>1.25.0</td>
  </tr><tr>
    <td>mysql-monitoring</td><td>5</td>
  </tr><tr>
    <td>notifications</td><td>24</td>
  </tr><tr>
    <td>notifications-ui</td><td>17</td>
  </tr><tr>
    <td>pivotal-account</td><td>1</td>
  </tr><tr>
    <td>push-apps-manager-release</td><td>652</td>
  </tr><tr>
    <td>routing</td><td>0.135.0</td>
  </tr><tr>
    <td>service-backup</td><td>14</td>
  </tr>
  </tbody>
  </table>
