---
title: Pivotal Application Service v2.4 Release Notes
owner: Release Engineering
---

Pivotal Cloud Foundry is certified by the Cloud Foundry Foundation for <%= Date.today.year %>.

Read more about the [certified provider program](https://www.cloudfoundry.org/provider-faq/) and the [requirements of providers](https://www.cloudfoundry.org/provider-requirements/).

<hr>

## <a id='releases'></a> Releases

### <a id='2.4.0-alpha.3'></a> 2.4.0-alpha.3

* **[Feature]** Remove configuration for internal MySQL Load Balancer
* **[Feature]** Co-locate BPM on all VMs in PAS and IST
* **[Feature]** Add `tile_installer` UAA client intended for use by service tiles during installation to create their own long-term operational client credentials
* **[Feature Improvement]** The notification release uses the shared CF CLI which can be updated independently
* **[Feature Improvement]** The notification ui release uses the shared CF CLI which can be updated independently
* **[Feature Improvement]** Loggregator can be updated without rolling every VM
* **[Feature Improvement]** Change default HAProxy instance count to 0
* **[Feature Improvement]** Routing-API job connects to MySQL using TLS
* **[Feature Improvement]** All errands use the CF CLI that is distributed as a BOSH release
* **[Feature Improvement]** Update name of the Small Footprint PAS tile shown on the tile in Ops Manager UI
* **[Feature Improvement]** clock_global now defaults to 2 instances to be highly available
* **[Feature Improvement]** Allow disabling connection pooling for autoscaler API & escape special characters in external database passwords
* **[Bug Fix]** Fix issue where the PAS tile could be incorrectly downloaded when upgrading SF-PAS via PivNet
* **[Bug Fix]** Fix parse error for syslog rules when iptables logging is enabled
* **[Bug Fix]** Remove two empty Credhub VMs from SF-PAS deployment

* Bump ubuntu-xenial stemcell to version `97.19`
* Bump binary-offline-buildpack to version `1.0.27`
* Bump bpm to version `0.13.0`
* Bump capi to version `1.70.0`
* Bump cf-autoscaling to version `212`
* Bump cf-cli to version `1.9.0`
* Bump cf-networking to version `2.17.0`
* Bump cf-smoke-tests to version `40.0.10`
* Bump cflinuxfs2 to version `1.242.0`
* Bump cflinuxfs3 to version `0.29.0`
* Bump consul to version `198`
* Bump credhub to version `2.1.1`
* Bump diego to version `2.19.0`
* Bump dotnet-core-offline-buildpack to version `2.1.5`
* Bump garden-runc to version `1.16.6`
* Bump go-offline-buildpack to version `1.8.28`
* Bump java-offline-buildpack to version `4.16`
* Bump log-cache to version `1.4.7`
* Add new release loggregator-agent at version `2.2`
* Bump loggregator to version `103.3`
* Bump mapfs to version `1.1.1`
* Bump mysql-monitoring to version `9.1.0`
* Bump nfs-volume to version `1.6.0`
* Bump nodejs-offline-buildpack to version `1.6.32`
* Bump notifications-ui to version `35`
* Bump notifications to version `53`
* Bump php-offline-buildpack to version `4.3.61`
* Bump push-apps-manager-release to version `666.0.12`
* Bump push-usage-service-release to version `667.0.10`
* Bump python-offline-buildpack to version `1.6.21`
* Bump ruby-offline-buildpack to version `1.7.24`
* Bump silk to version `2.17.0`
* Bump staticfile-offline-buildpack to version `1.4.32`
* Bump statsd-injector to version `1.4.0`
* Bump syslog to version `11.4.0`

<table border="1" class="nice">
  <thead>
    <tr>
      <th>Component</th>
      <th>Version</th>
    </tr>
  </thead>
  <tbody>
    <tr><td>ubuntu-xenial stemcell</td><td>97.19</td></tr>
    <tr><td>backup-and-restore-sdk</td><td>1.10.0</td></tr>
    <tr><td>binary-offline-buildpack</td><td>1.0.27</td></tr>
    <tr><td>bosh-dns-aliases</td><td>0.0.3</td></tr>
    <tr><td>bosh-system-metrics-forwarder</td><td>0.0.16</td></tr>
    <tr><td>bpm</td><td>0.13.0</td></tr>
    <tr><td>capi</td><td>1.70.0</td></tr>
    <tr><td>cf-autoscaling</td><td>212</td></tr>
    <tr><td>cf-backup-and-restore</td><td>0.0.11</td></tr>
    <tr><td>cf-cli</td><td>1.9.0</td></tr>
    <tr><td>cf-mysql</td><td>36.15.0</td></tr>
    <tr><td>cf-networking</td><td>2.17.0</td></tr>
    <tr><td>cf-smoke-tests</td><td>40.0.10</td></tr>
    <tr><td>cf-syslog-drain</td><td>7.1</td></tr>
    <tr><td>cflinuxfs2</td><td>1.242.0</td></tr>
    <tr><td>cflinuxfs3</td><td>0.29.0</td></tr>
    <tr><td>consul</td><td>198</td></tr>
    <tr><td>credhub</td><td>2.1.1</td></tr>
    <tr><td>diego</td><td>2.19.0</td></tr>
    <tr><td>dotnet-core-offline-buildpack</td><td>2.1.5</td></tr>
    <tr><td>garden-runc</td><td>1.16.6</td></tr>
    <tr><td>go-offline-buildpack</td><td>1.8.28</td></tr>
    <tr><td>haproxy</td><td>9.3.0</td></tr>
    <tr><td>java-offline-buildpack</td><td>4.16</td></tr>
    <tr><td>log-cache</td><td>1.4.7</td></tr>
    <tr><td>loggregator-agent</td><td>2.2</td></tr>
    <tr><td>loggregator</td><td>103.3</td></tr>
    <tr><td>mapfs</td><td>1.1.1</td></tr>
    <tr><td>mysql-monitoring</td><td>9.1.0</td></tr>
    <tr><td>nats</td><td>26</td></tr>
    <tr><td>nfs-volume</td><td>1.6.0</td></tr>
    <tr><td>nodejs-offline-buildpack</td><td>1.6.32</td></tr>
    <tr><td>notifications-ui</td><td>35</td></tr>
    <tr><td>notifications</td><td>53</td></tr>
    <tr><td>php-offline-buildpack</td><td>4.3.61</td></tr>
    <tr><td>push-apps-manager-release</td><td>666.0.12</td></tr>
    <tr><td>push-usage-service-release</td><td>667.0.10</td></tr>
    <tr><td>pxc</td><td>0.14.0</td></tr>
    <tr><td>python-offline-buildpack</td><td>1.6.21</td></tr>
    <tr><td>routing</td><td>0.182.0</td></tr>
    <tr><td>ruby-offline-buildpack</td><td>1.7.24</td></tr>
    <tr><td>silk</td><td>2.17.0</td></tr>
    <tr><td>staticfile-offline-buildpack</td><td>1.4.32</td></tr>
    <tr><td>statsd-injector</td><td>1.4.0</td></tr>
    <tr><td>syslog</td><td>11.4.0</td></tr>
    <tr><td>uaa</td><td>60.2</td></tr>
  </tbody>
</table>

### <a id='2.4.0-alpha.2'></a> 2.4.0-alpha.2

* **[Feature]** Support restore from different Azure storage account
* **[Feautre Improvement]** Improve UI for route integrity options
* **[Feature Improvement]** Credhub is GA and on by default
* **[Feature Improvement]** Scale Consul Server down to 0
* **[Feature Improvement]** Remove option to disable route integrity
* **[Feature Improvement]** network policy server connects to MySQL using TLS
* **[Feature Improvement]** Operators can distinguish among metrics being emitted from different PAS tile deployments
* **[Feature Improvement]** credhub connects to MySQL using TLS
* **[Feature Improvement]** Diego connects to MySQL using TLS
* **[Feature Improvement]** CAPI connects to MySQL using TLS
* **[Feature Improvement]** PAS can be configured with a CA certificate for TLS connections to an external MySQL database
* **[Feature Improvement]** Metrics emitted from each deployment are tagged with additional metadata

* Bump stemcell to Xenial version `97.17`
* Bump backup-and-restore-sdk to version `1.10.0`
* Bump binary-offline-buildpack to version 1.0.26
* Bump bosh-system-metrics-forwarder to version 0.0.16
* Bump bpm to version 0.12.3
* Bump capi to version 1.69.0
* Bump cf-autoscaling to version 210
* Bump cf-cli to version 1.8.0
* Bump cf-networking to version 2.16.0
* Bump cf-smoke-tests to version 40.0.9
* Bump cf-syslog-drain to version 7.1
* Bump cflinuxfs2 to version 1.238.0
* Bump cflinuxfs3 to version 0.25.0
* Bump consul to version 196
* Bump diego to version 2.18.0
* Bump garden-runc to version 1.16.4
* Bump haproxy to version 9.3.0
* Bump log-cache to version 1.4.6
* Bump loggregator to version 103.2
* Bump nats to version 26
* Bump notifications to version 52
* Bump notifications-ui to version 34
* Bump pxc to version 0.14.0
* Bump routing to version 0.182.0
* Bump silk to version 2.16.0

  <table border="1" class="nice">
  <thead> <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>stemcell</td><td>97.17</td>
  </tr><tr>
    <td>backup-and-restore-sdk</td><td>1.10.0</td>
  </tr><tr>
    <td>binary-offline-buildpack</td><td>1.0.26</td>
  </tr><tr>
    <td>bosh-dns-aliases</td><td>0.0.3</td>
  </tr><tr>
    <td>bosh-system-metrics-forwarder</td><td>0.0.16</td>
  </tr><tr>
    <td>bpm</td><td>0.12.3</td>
  </tr><tr>
    <td>capi</td><td>1.69.0</td>
  </tr><tr>
    <td>cf-autoscaling</td><td>210</td>
  </tr><tr>
    <td>cf-backup-and-restore</td><td>0.0.11</td>
  </tr><tr>
    <td>cf-cli</td><td>1.8.0</td>
  </tr><tr>
    <td>cf-mysql</td><td>36.15.0</td>
  </tr><tr>
    <td>cf-networking</td><td>2.16.0</td>
  </tr><tr>
    <td>cf-smoke-tests</td><td>40.0.9</td>
  </tr><tr>
    <td>cf-syslog-drain</td><td>7.1</td>
  </tr><tr>
    <td>cflinuxfs2</td><td>1.238.0</td>
  </tr><tr>
    <td>cflinuxfs3</td><td>0.25.0</td>
  </tr><tr>
    <td>consul</td><td>196</td>
  </tr><tr>
    <td>credhub</td><td>2.0.2</td>
  </tr><tr>
    <td>diego</td><td>2.18.0</td>
  </tr><tr>
    <td>dotnet-core-offline-buildpack</td><td>2.1.4</td>
  </tr><tr>
    <td>garden-runc</td><td>1.16.4</td>
  </tr><tr>
    <td>go-offline-buildpack</td><td>1.8.26</td>
  </tr><tr>
    <td>haproxy</td><td>9.3.0</td>
  </tr><tr>
    <td>java-offline-buildpack</td><td>4.15</td>
  </tr><tr>
    <td>log-cache</td><td>1.4.6</td>
  </tr><tr>
    <td>loggregator</td><td>103.2</td>
  </tr><tr>
    <td>mapfs</td><td>1.1.0</td>
  </tr><tr>
    <td>mysql-monitoring</td><td>8.20.0</td>
  </tr><tr>
    <td>nats</td><td>26</td>
  </tr><tr>
    <td>nfs-volume</td><td>1.5.3</td>
  </tr><tr>
    <td>nodejs-offline-buildpack</td><td>1.6.30</td>
  </tr><tr>
    <td>notifications</td><td>52</td>
  </tr><tr>
    <td>notifications-ui</td><td>34</td>
  </tr><tr>
    <td>php-offline-buildpack</td><td>4.3.59</td>
  </tr><tr>
    <td>push-apps-manager-release</td><td>666.0.0</td>
  </tr><tr>
    <td>push-usage-service-release</td><td>667.0.1</td>
  </tr><tr>
    <td>python-offline-buildpack</td><td>1.6.20</td>
  </tr><tr>
    <td>pxc</td><td>0.14.0</td>
  </tr><tr>
    <td>routing</td><td>0.182.0</td>
  </tr><tr>
    <td>ruby-offline-buildpack</td><td>1.7.22</td>
  </tr><tr>
    <td>silk</td><td>2.16.0</td>
  </tr><tr>
    <td>staticfile-offline-buildpack</td><td>1.4.31</td>
  </tr><tr>
    <td>statsd-injector</td><td>1.3.0</td>
  </tr><tr>
    <td>syslog</td><td>11.3.2</td>
  </tr><tr>
    <td>uaa</td><td>60.2</td>
  </tr>
  </tbody>
  <tfoot>
  <tr>
    <td colspan="2"><em>\* Components marked with an asterisk have been patched to resolve security vulnerabilities or fix component behavior.</em></td>
  </tr>
  </tfoot>
  </table>

### <a id='2.4.0-alpha.1'></a> 2.4.0-alpha.1

* Bump bosh-dns-aliases to version `0.0.3`
* Bump bpm to version `0.12.2`
* Bump capi to version `1.67.0`
* Bump cf-cli to version `1.6.0`
* Bump cf-networking to version `2.14.0`
* Bump credhub to version `2.0.2`
* Bump diego to version `2.16.0`
* Bump garden-runc to version `1.16.3`
* Bump haproxy to version `9.1.0`
* Bump log-cache to version `1.4.1`
* Bump loggregator to version `103.1`
* Bump mapfs to version `1.1.0`
* Bump push-apps-manager-release to version `666.0.0`
* Bump push-usage-service-release to version `667.0.1`
* Bump routing to version `0.180.0`
* Bump silk to version `2.14.0`

  <table border="1" class="nice">
  <thead> <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>stemcell</td><td>97.15</td>
  </tr><tr>
    <td>backup-and-restore-sdk</td><td>1.9.0</td>
  </tr><tr>
    <td>binary-offline-buildpack</td><td>1.0.25</td>
  </tr><tr>
    <td>bosh-dns-aliases</td><td>0.0.3</td>
  </tr><tr>
    <td>bosh-system-metrics-forwarder</td><td>0.0.15</td>
  </tr><tr>
    <td>bpm</td><td>0.12.2</td>
  </tr><tr>
    <td>capi</td><td>1.67.0</td>
  </tr><tr>
    <td>cf-autoscaling</td><td>208</td>
  </tr><tr>
    <td>cf-backup-and-restore</td><td>0.0.11</td>
  </tr><tr>
    <td>cf-cli</td><td>1.6.0</td>
  </tr><tr>
    <td>cf-mysql</td><td>36.15.0</td>
  </tr><tr>
    <td>cf-networking</td><td>2.14.0</td>
  </tr><tr>
    <td>cf-smoke-tests</td><td>40.0.6</td>
  </tr><tr>
    <td>cf-syslog-drain</td><td>7.0</td>
  </tr><tr>
    <td>cflinuxfs2</td><td>1.234.0</td>
  </tr><tr>
    <td>cflinuxfs3</td><td>0.17.0</td>
  </tr><tr>
    <td>consul</td><td>195</td>
  </tr><tr>
    <td>credhub</td><td>2.0.2</td>
  </tr><tr>
    <td>diego</td><td>2.16.0</td>
  </tr><tr>
    <td>dotnet-core-offline-buildpack</td><td>2.1.4</td>
  </tr><tr>
    <td>garden-runc</td><td>1.16.3</td>
  </tr><tr>
    <td>go-offline-buildpack</td><td>1.8.26</td>
  </tr><tr>
    <td>haproxy</td><td>9.1.0</td>
  </tr><tr>
    <td>java-offline-buildpack</td><td>4.15</td>
  </tr><tr>
    <td>log-cache</td><td>1.4.1</td>
  </tr><tr>
    <td>loggregator</td><td>103.1</td>
  </tr><tr>
    <td>mapfs</td><td>1.1.0</td>
  </tr><tr>
    <td>mysql-monitoring</td><td>8.20.0</td>
  </tr><tr>
    <td>nats</td><td>25</td>
  </tr><tr>
    <td>nfs-volume</td><td>1.5.3</td>
  </tr><tr>
    <td>nodejs-offline-buildpack</td><td>1.6.30</td>
  </tr><tr>
    <td>notifications</td><td>51</td>
  </tr><tr>
    <td>notifications-ui</td><td>33</td>
  </tr><tr>
    <td>php-offline-buildpack</td><td>4.3.59</td>
  </tr><tr>
    <td>push-apps-manager-release</td><td>666.0.0</td>
  </tr><tr>
    <td>push-usage-service-release</td><td>667.0.1</td>
  </tr><tr>
    <td>python-offline-buildpack</td><td>1.6.20</td>
  </tr><tr>
    <td>pxc</td><td>0.13.0</td>
  </tr><tr>
    <td>routing</td><td>0.180.0</td>
  </tr><tr>
    <td>ruby-offline-buildpack</td><td>1.7.22</td>
  </tr><tr>
    <td>silk</td><td>2.14.0</td>
  </tr><tr>
    <td>staticfile-offline-buildpack</td><td>1.4.31</td>
  </tr><tr>
    <td>statsd-injector</td><td>1.3.0</td>
  </tr><tr>
    <td>syslog</td><td>11.3.2</td>
  </tr><tr>
    <td>uaa</td><td>60.2</td>
  </tr>
  </tbody>
  <tfoot>
  <tr>
    <td colspan="2"><em>\* Components marked with an asterisk have been patched to resolve security vulnerabilities or fix component behavior.</em></td>
  </tr>
  </tfoot>
  </table>

## <a id='upgrade'></a> How to Upgrade

The procedure for upgrading to Pivotal Application Service (PAS) v2.4 is documented in the [Upgrading Pivotal Cloud Foundry](http://docs.pivotal.io/pivotalcf/2-4/customizing/upgrading-pcf.html) topic.

When upgrading to v2.4, be aware of the following upgrade considerations:

* If you previously used an earlier version of PAS, you must first upgrade to PAS v2.3 to successfully upgrade to PAS v2.4.

* You must enable route integity before upgrading to PAS v2.4. To enable route integrity, go to **Application Containers** in PAS and select **Router uses TLS to verify application identity**. This option does use approximately 32MB more memory per application.

* Some partner service tiles may be incompatible with PCF v2.4. Pivotal is working with partners to ensure their tiles are updated to work with the latest versions of PCF.<br/><br/> For information about which partner service releases are currently compatible with PCF v2.4, review the appropriate partners services release documentation at [https://docs.pivotal.io](https://docs.pivotal.io), or contact the partner organization that produces the tile.


## <a id='new-features'></a> New Features in PAS v2.4

### <a id="credhub-v2"></a> Credhub v2

Credhub is now v2.x and is on by default...

### <a id="route-integrity"></a> Route integrity can no longer be disabled

By default, you the router will use TLS to verify application identity. If upgrading from PAS 2.3, this option must be turned on before upgrading.

### <a id="consul-server-removed"></a> Consul Server VMs are removed from PAS

Consul Server VMs are now removed from PAS, saving VM resources and reducing maintenance around managing a clustered component.

### <a id="tls-to-db"></a> Components communicate to Database using TLS

Platform components like CAPI and Diego will use TLS to communicate with the database.
This happens automatically when using the Internal Database, for external databases like RDS you can provide the CA Certificate in the PAS Databases form.
Note: As of PAS 2.4.0-alpha.2 this is a work-in-progress, additional components will be moved over to TLS in subsequent pre-release versions.

### <a id="nfs-experimental-graduation"></a> NFS-Experimental Service Graduation

The existing `nfs-experimental` service is promoted from "experimental" to "production" also deprecating the original fuse-based `nfs` service to `nfs-legacy`.  Existing `nfs` service bindings will now be listed as `nfs-legacy`.  To switch-over we recommend that you re-create and re-bind to the `nfs` service.

### <a id="share-service-instance"> Share Service Instances with Apps Manager

Through the **Overview** tab of a service instance, you can now share your service
instance across the spaces you specify. With space developer permissions, you
can view, add, and remove service instance sharing.

For more information, see [Service Instance Sharing](http://docs.pivotal.io/pivotalcf/2-4/console/manage-apps.html#shared-instances).


## <a id='known-issues'></a> Known Issues

### <a id='tcp-port-config'></a> Configuring Multiple TCP Routing Ports

This section describes an issue and workaround related to configuring multiple TCP Routing Ports in the PAS tile UI. 

#### Issue

You cannot enter a comma-separated list of ports in the **TCP Routing Ports** field of the PAS tile. If you enter a comma-separated list, the Routing API does not start. The **TCP Routing Ports** field allows entries in the following formats:

* A single value, such as `1234`
* A range of values, such as `1234-5678`

#### Workaround

If you want to configure multiple ports, do the following:

<p class="note"><strong>Note:</strong> This procedure causes brief downtime for TCP apps listening on ports that you open after deploying PAS.</p>

1. Configure PAS with **Enable TCP Routing** selected.

1. Enter one port you want to use in the **TCP Routing Ports** field.

1. Deploy PAS.

1. Use the Routing API to add all desired TCP ports by following the instructions in the [Modify your TCP ports](https://docs.pivotal.io/pivotalcf/1-12/adminguide/enabling-tcp-routing.html#modify-ports) section of the _Enabling TCP Routing_ topic. When using the Routing API, you can include a comma separated list of ports.

### <a id='cf-networking-downtime'></a> API downtime during rolling deploys

Operators will intermittently receive errors when pushing apps during a rolling upgrade due to https://www.pivotaltracker.com/story/show/160774116.
This will be fixed in a subsequent pre-release version of PAS.
