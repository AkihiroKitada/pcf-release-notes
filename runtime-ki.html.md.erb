---
title: Pivotal Elastic Runtime v1.6 Known Issues
---

#### New Issues

* **Elastic Runtime 1.6.35 to 1.6.42**: There is an issue on these versions where the Consul server deployment may fail if you are deploying to a private network that does not use RFC 1918 private IP addresses.

* **Elastic Runtime 1.6.24 upgrades**: Upgrading Elastic Runtime to or from this version may not be accepted by bosh. If you have Elastic Runtime 1.6.24 added to your PCF environment but not successfully installed, you should remove it. If it is installed, you can upgrade to later versions but you may have to `bosh delete` a release package that bosh believes has a conflicting file hash.

* **Elastic Runtime 1.6.15 UAA with LDAP startup**: There's a UAA startup issue for customers using the LDAP user store when they upgrade from Elastic Runtime 1.5.x or v1.6.0-1.6.14 to 1.6.15. The workaround is to manually delete the LDAP provider from the UAA DB by issuing the following query DELETE FROM identity_provider WHERE type='ldap', and then upgrade to 1.6.15. This issue was resolved in Elastic Runtime 1.6.16.

* **Zombie processes**: With the Elastic Runtime 1.6.13, 1.6.14, and 1.5.13 releases, there's a linux kernel bug that affects Garden, Docker, and almost certainly Warden for Cloud Foundry deployments on stemcell 3146.5. It manifests in containers failing to be killed properly leaving unkillable zombie processes around consuming lots of CPU and some memory. After a while, Diego cells / DEAs may experience slower performance and eventually may even become unresponsive. The current workaround is to restart these cells / DEAs before they slow down so far as to become unresponsive, or once they become unresponsive. This issue was resolved in Elastic Runtime 1.6.15 and 1.5.14.

* **Diego BBS failure**: Etcd may sometimes experience orphaned processes that leads to the Diego BBS job failing. This can be remedied by `killall etcd` on the Diego BBS VMs and subsequent redeployment. This will be fixed in a future 1.6.x release soon.

* **Version label in tile**: The [Pivotal Cloud Foundry](https://network.pivotal.io/products/pivotal-cf) (PCF) Elastic Runtime tile v.1.6.0 will show "1.6.0-build.315" in the tile version. This is fine.

* **v.1.5.x to v.1.6.0 upgrades**: Before upgrading to Elastic Runtime v.1.6.0 from v.1.5.x, make sure you have followed [these instructions](http://docs.pivotal.io/pivotalcf/customizing/upgrading-pcf.html).

* **No Notifications and Autoscale services on DEAs**: The Notifications and Autoscale services in Elastic Runtime will always deploy on Diego, even if DEAs are selected as the default backend, in versions 1.6.0 to 1.6.9 (this was fixed in patch 1.6.10). The Apps Manager and Apps Usage service will deploy to Diego only if the "Use Diego by default" checkbox is enabled in the configuration of Elastic Runtime.

* **Diego cell push timeout with no `-b`**: Diego Cells may sometimes time-out on app pushes when any given Diego Cell receives its first app push with no buildpack specified for that app. This is because the Cell is caching all of the buildpacks for subsequent app pushes, and this may take longer than what the app staging allows.

* **Slow deploys when Diego cells have high instance counts**: Cloud Foundry installations in which Diego cells host over 30 app containers may experience degraded performance. This behavior manifests as:
	- Slow deployments, in which some Diego cells take up to 15 minutes to drain.
	- Reduced app performance and increased crash rates during rolling deployment.
	- Possible brief outages of single-instance apps during rolling deployment.  

	This issue stems from the scheduling algorithm used in PCF 1.6 Diego, and is resolved in PCF 1.7 and later.

* **Slow Diego cell performance**: Diego cells may sometimes experience slow performance for various actions like staging new applications. If you experience slow performance, you can SSH into the Ops Manager VM and `bosh-recreate` the affected Diego Cell VM.

* **Docker library image names**: Docker library images require you to specify `library/` in front of the docker image name. E.g `cf p jetty -o library/jetty`

* **Diego cell disk space with lots of Docker**: Diego Cells may run out of disk space if they using a lot of different Docker images with different layers.

* **`cf files` on Diego**: The CLI command for viewing application files, `cf files`, does not work with applications on Diego.

* **Diego BBS handshake error in logs**: The Diego BBS may output a TLS handshake error every three seconds in the sys logs. This error is fine to ignore, and will be fixed in a future release of Diego.

* **Space Developer role to SSH**: To SSH into an application container on Diego, your CF user must have the Space Developer role attached to it for the application space.

* **Smoke Test failures**: The Smoke Tests may occasionally fail at the logging test suite. The Smoke Tests errand is fine to re-run in case of any failures.

* **Postgres version**: The version of Postgres has been upgraded to 9.4.2. If you have Postgresql databases in your deployment, Cloud Controller and UAA will be unavailable during the upgrade.
In case that upgrade fails, there are mitigations [documented here](https://github.com/cloudfoundry/cf-release/releases/tag/v211).

* **Blobstore space**: After you upgrade to PCF 1.6, you may want to reclaim some blobstore space due to some orphaned blobs. To reclaim space, call [this end point](http://apidocs.cloudfoundry.org/222/blobstores/delete_all_blobs_in_the_buildpack_cache_blobstore.html) to delete all buildpack caches from the blobstore after the v1.6 upgrade is complete.

* **CCDB events table migration**: This upgrade includes a migration that modifies the events table on the Cloud Controller database. This table may be very large, and the migration may cause the upgrade to fail at the Cloud Controller job if it takes too long. If this happens, do not restart the deploy until the migration has finished running. The deploy can be restarted once the space_id foreign key constraint has been removed from the events table.  
To avoid the possibility of the migration causing a failure, truncate the events table before the deployment starts. The data in the events table are audit and log data, and PCF can function without it.

* **.NET security**: .NET support on Windows cells does not support the same level of security and isolation as seen on Linux cells. At this time, it is only recommended for running "trusted" apps.

* **Windows container permissions**: At this time, the container accounts on Windows cells must have permissions to log on locally, which may not be the default.

* **Windows filename length**: Application file names on Windows cells are limited to maximum length of 100 characters. As a workaround, make sure that all filenames in an application directory are shorter than 100 characters before pushing.

* **Blue-Green deploy from Apps Manager**: Apps Manager now has a zero-downtime blue green deploy. As of v1.6, any `NON_ADMIN` environment variable changed from the default setting will not be applied to the second app version. You will need to set `NON-ADMIN` environment variables on both versions in order to keep the configuration consistent.

* **Diego Beta tile**: If you have installed the Diego Beta tile in a 1.5.x Elastic Runtime environment, it will need to be uninstalled prior to upgrade. The Windows MSI provided with the 1.6 Elastic Runtime release will not work with the older Diego Beta tile.

#### Existing Issues

* On the Security Config page of Elastic Runtime, after you supply your own cipher sets and click Save, do not erase the HAProxy and Router Cipher fields. The ciphers will not return to their default values when deleted, and will instead be interpreted as an empty cipher set.

* When selecting between internal and external System Database and/or File Storage config, if saved values for external systems fail verification (e.g. a host is not reachable from Ops Manager), the values will persist if you then select 'Internal Databases' or 'Internal File Store'. To resolve this issue, return to your Ops Manager Installation Dashboard and click **Revert**, located in the upper right corner of the page.

* Recent versions of the cf CLI, including the version shipped with v1.6, will report a version mismatch with Elastic Runtime. You can ignore this message, and there is no need to upgrade the CLI. This error will be fixed in a future version of the cf CLI.

