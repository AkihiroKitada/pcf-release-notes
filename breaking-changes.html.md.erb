---
title: PCF v2.2 Breaking Changes
owner: Release Engineering
---

This topic describes the breaking changes you need to be aware of when upgrading to Pivotal Cloud Foundry (PCF) v2.2. For more information about important preparation steps you must follow before beginning an upgrade, see [Upgrading Pivotal Cloud Foundry](http://docs.pivotal.io/2-1/customizing/upgrading-pcf.html).


## <a id='pas'></a> Pivotal Application Service (PAS)

### <a id="timestamp"></a> Log Aggregation Systems May Parse Timestamps Incorrectly

For new installations of PAS v2.2,
Diego timestamps in logs are now in RFC 3339 format.
The Unix epoch format is set by default for upgrades to PAS v2.2.

You can enable RFC 3339 format in your PAS tile configuration. Before enabling RFC 3339 format for Diego logs, ensure that your log aggregation system anticipates the timestamp format change.

If you experience issues, you can disable RFC 3339 format in the PAS tile.
For more information about this PCF v2.2 feature, see [New Format for Diego Timestamps](runtime-rn.html#timestamp) in _Pivotal Application Service v2.2 Release Notes_.

### <a id="ssh-client"></a> SSH Proxy May Restrict Client Access

The SSH proxy now accepts a narrower range of ciphers, MACs, and key exchanges. This feature may have complications if you use a SSH client other than <code>cf ssh</code> to connect. For more information, see <a href="https://docs.pivotal.io/pivotalcf/devguide/deploy-apps/ssh-apps.html#other-ssh-access">Application SSH Access without cf CLI</a>.

### <a id="instance-profile"></a> Deployments with S3 Filestore Require an Instance Profile or an Access and Secret Key  

PAS now supports [AWS instance profiles](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use_switch-role-ec2_instance-profiles.html) when you are configuring an S3 filestore. Either an instance profile or an access and secret key are required. If you do not specify one of these authentication mechanisms, the deployment fails.

If you configure both an instance profile and an access and secret key, the instance profile is prioritized and the access and secret key are ignored.

For more information, see the **External or S3 Filestore** section of any IaaS-specific PAS configuration topic, such as [Installing PAS after Deploying PCF on OpenStack](https://docs.pivotal.io/pivotalcf/customizing/openstack-er-config.html#external_s3).

### <a id="db-tls-downtime"></a> Temporary Downtime when Migrating Internal System Databases 

Upgrading existing internal system databases to the new default option of **Internal Databases - MySQL with TLS** causes temporary downtime of PAS system functions. It does not interrupt apps hosted by PAS.

The length of downtime depends on multiple factors, including database size, persistent disk type, CPU and disk capacity of VMs, and PAS configuration. For more information, see [Migrate to TLS Communication](https://docs.pivotal.io/pivotalcf/opsguide/scaling-down-mysql.html#migrate).


## <a id='opsman'></a> Ops Manager

### <a id="om-syslog"></a> Ops Manager Logs Have Changed Locations

Ops Manager centralized its logs so that you can now configure a syslog server in the Ops Manager **Settings**. Because of this feature change for Ops Manager v2.2, you cannot run scripts to fetch Ops Manager logs at their previous locations. Instead, Pivotal now recommends you configure syslog.

For more information about the syslog feature, see [Configure an Ops Manager Syslog Server](opsmanager-rn.html#om-syslog) in the _PCF Ops Manager Release v2.2 Release Notes_.


## <a id='ist'></a> PCF Isolation Segment

### <a id="ist-timestamp"></a> Log Aggregation Systems May Parse Timestamps Incorrectly

See [New Format for Diego Timestamps](segment-rn.html#timestamp) in _PCF Isolation Segment v2.2 Release Notes_ and breaking changes for [Pivotal Application Service (PAS)](#timestamp) for more information.


## <a id="srt"></a> PCF Small Footprint Runtime

### <a id="srt-instance-profile"></a> Deployments with S3 Filestore Require an Instance Profile or an Access and Secret Key 

Small Footprint Runtime now supports [AWS instance profiles](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use_switch-role-ec2_instance-profiles.html) when you are configuring an S3 filestore. Either an instance profile or an access and secret key are required. If you do not specify one of these authentication mechanisms, the deployment fails.

If you configure both an instance profile and an access and secret key, the instance profile is prioritized and the access and secret key are ignored.

For more information, see the **External or S3 Filestore** section of any IaaS-specific PAS configuration topic, such as [Installing PAS after Deploying PCF on OpenStack](https://docs.pivotal.io/pivotalcf/customizing/openstack-er-config.html#external_s3).
