---
title: PCF v2.3 Breaking Changes
owner: Release Engineering
---

This topic describes the breaking changes you need to be aware of when upgrading to Pivotal Cloud Foundry (PCF) v2.3. For more information about important preparation steps you must follow before beginning an upgrade, see [Upgrading Pivotal Cloud Foundry](http://docs.pivotal.io/2-3/customizing/upgrading-pcf.html).


## <a id='pas'></a> Pivotal Application Service (PAS)

### <a id="readonly-volume-mounts"></a> Read-Only Volume Mounts

A fix from NFS v1.3.1 has been backported to NFS v1.2.1 for an incompatibility between the NFS Volume release and Diego's container runtime, Garden. Because the fix was in the NFS Service Broker, and service bindings created by old versions of this broker will not get migrated during upgrade, existing NFS service bindings that specify read-only mounts will still exhibit the incompatibility.

As a result, customers upgrading from versions containing nfs-volume-release < 1.2.1 that have NFS services bound read-only to their applications will see that their applications crash after upgrade.

To fix this condition, customers should unbind the service, rebind it, and then restage the application.

Alternately, customers wishing to avoid application down time can temporarily re-bind their applications as read/write before upgrading, and then swtich to read-only afterwards.

### <a id='mutual-tls-id'></a> SSH and TCP Do Not Work with Mutual TLS App Identity Verification Enabled

When you enable the **Router and applications use mutual TLS to verify each other's identity** option in PAS v2.3, Envoy only recognizes communications from the Gorouter. As a result, SSH and TCP no longer work.

### <a id="backup-restore-name-change"></a> Backup-Prepare Instance Group Has Been Renamed to Backup-Restore

The name of the `backup-prepare` instance group has been changed to `backup-restore` to better reflect what it does. This could break some external tools that were setting the properties for this instance group via the Ops Manager API.


## <a id='opsman'></a> PCF Operations Manager (Ops Manager)

###<a id='xenial'></a> Update BOSH Add-ons for Xenial Support

Starting in PCF v2.3, Ops Manager uses a Xenial stemcell. Before you upgrade to PCF v2.3, you must do the following:

1. Verify that any tiles that you have installed on your current foundation, either from Pivotal or a partner, are compatible with PCF v2.3 and its supported stemcells. For more information on checking PCF and stemcell compatibility, see [Tile Compatibility](https://docs.pivotal.io/pivotalcf/2-3/upgrading/checklist.html#compatibility) in the Upgrade Checklist.

1. If you are using any of the BOSH add-ons for PCF, you must update the add-on and its configuration to include the Ubuntu Xenial 16.04 stemcell. The following add-on versions support the Xenial stemcell:

+ ClamAV Add-on for PCF v1.2.22 and later. For information on how to update this add-on, see https://docs.pivotal.io/addon-antivirus/updating-for-xenial.html.
+ File Integrity Monitoring (FIM) Add-on for PCF v1.4.28 and later. For information on how to update this add-on, see https://docs.pivotal.io/addon-fim/updating-for-xenial.html.
+ IPSec Add-on for PCF v1.9.9 and later. For information on how to update this add-on, see https://docs.pivotal.io/addon-ipsec/updating-for-xenial.html.

You must apply these updates before you upgrade to PCF v2.3.

###<a id='bosh-dns'></a> BOSH DNS Must be Enabled

In PCF v2.3, you cannot opt out of BOSH DNS. Upgrades to PCF v2.3 will fail if BOSH DNS is disabled in PCF v2.2.

<%= image_tag("bosh-dns-error.png") %>


## <a id='ist'></a> PCF Isolation Segment

TODO
